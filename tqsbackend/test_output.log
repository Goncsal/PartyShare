[INFO] Scanning for projects...
[INFO] 
[INFO] -----------------------< tqs.backend:tqsbackend >-----------------------
[INFO] Building tqsbackend 0.0.1-SNAPSHOT
[INFO]   from pom.xml
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] --- jacoco:0.8.11:prepare-agent (default) @ tqsbackend ---
[INFO] argLine set to -javaagent:/Users/joaobarreira/.m2/repository/org/jacoco/org.jacoco.agent/0.8.11/org.jacoco.agent-0.8.11-runtime.jar=destfile=/Users/joaobarreira/Desktop/3ano1semestre/TQS/PartyShare/tqsbackend/target/jacoco.exec
[INFO] 
[INFO] --- resources:3.3.1:resources (default-resources) @ tqsbackend ---
[INFO] Copying 4 resources from src/main/resources to target/classes
[INFO] Copying 18 resources from src/main/resources to target/classes
[INFO] 
[INFO] --- compiler:3.14.1:compile (default-compile) @ tqsbackend ---
[INFO] Nothing to compile - all classes are up to date.
[INFO] 
[INFO] --- resources:3.3.1:testResources (default-testResources) @ tqsbackend ---
[INFO] Copying 2 resources from src/test/resources to target/test-classes
[INFO] 
[INFO] --- compiler:3.14.1:testCompile (default-testCompile) @ tqsbackend ---
[INFO] Nothing to compile - all classes are up to date.
[INFO] 
[INFO] --- surefire:3.2.5:test (default-test) @ tqsbackend ---
[INFO] Using auto detected provider org.apache.maven.surefire.junitplatform.JUnitPlatformProvider
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running tqs.backend.tqsbackend.dto.MessageCreateRequestTest
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.081 s -- in tqs.backend.tqsbackend.dto.MessageCreateRequestTest
[INFO] Running tqs.backend.tqsbackend.dto.MessageResponseTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.011 s -- in tqs.backend.tqsbackend.dto.MessageResponseTest
[INFO] Running tqs.backend.tqsbackend.dto.UserRegistrationDtoTest
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.024 s -- in tqs.backend.tqsbackend.dto.UserRegistrationDtoTest
[INFO] Running tqs.backend.tqsbackend.dto.UserLoginRequestTest
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 s -- in tqs.backend.tqsbackend.dto.UserLoginRequestTest
[INFO] Running tqs.backend.tqsbackend.dto.UserDtoTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.006 s -- in tqs.backend.tqsbackend.dto.UserDtoTest
[INFO] Running tqs.backend.tqsbackend.dto.DateRangeDtoTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 s -- in tqs.backend.tqsbackend.dto.DateRangeDtoTest
[INFO] Running tqs.backend.tqsbackend.TqsbackendApplicationTests
01:14:07.090 [main] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils -- Could not detect default configuration classes for test class [tqs.backend.tqsbackend.TqsbackendApplicationTests]: TqsbackendApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
01:14:07.169 [main] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper -- Found @SpringBootConfiguration tqs.backend.tqsbackend.TqsbackendApplication for test class tqs.backend.tqsbackend.TqsbackendApplicationTests
01:14:07.276 [main] INFO org.springframework.boot.devtools.restart.RestartApplicationListener -- Restart disabled due to context in which it is running

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.7)

2025-12-11T01:14:07.451Z  INFO 34677 --- [           main] t.b.t.TqsbackendApplicationTests         : Starting TqsbackendApplicationTests using Java 21.0.2 with PID 34677 (started by joaobarreira in /Users/joaobarreira/Desktop/3ano1semestre/TQS/PartyShare/tqsbackend)
2025-12-11T01:14:07.451Z  INFO 34677 --- [           main] t.b.t.TqsbackendApplicationTests         : No active profile set, falling back to 1 default profile: "default"
2025-12-11T01:14:08.014Z  INFO 34677 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-11T01:14:08.061Z  INFO 34677 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 41 ms. Found 8 JPA repository interfaces.
2025-12-11T01:14:08.305Z  INFO 34677 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-11T01:14:08.350Z  INFO 34677 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.33.Final
2025-12-11T01:14:08.372Z  INFO 34677 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-11T01:14:08.597Z  INFO 34677 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-11T01:14:08.620Z  INFO 34677 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-12-11T01:14:08.804Z  INFO 34677 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-12-11T01:14:08.805Z  INFO 34677 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-12-11T01:14:08.823Z  WARN 34677 --- [           main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-11T01:14:08.837Z  INFO 34677 --- [           main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-11T01:14:09.644Z  INFO 34677 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-11T01:14:09.812Z  INFO 34677 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-11T01:14:10.039Z  INFO 34677 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
Mock data initialized: 3 owners and 5 items created!
2025-12-11T01:14:11.425Z  WARN 34677 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-11T01:14:11.806Z  INFO 34677 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint beneath base path '/actuator'
2025-12-11T01:14:11.845Z  INFO 34677 --- [           main] t.b.t.TqsbackendApplicationTests         : Started TqsbackendApplicationTests in 4.577 seconds (process running for 5.843)
Mockito is currently self-attaching to enable the inline-mock-maker. This will no longer work in future releases of the JDK. Please add Mockito as an agent to your build as described in Mockito's documentation: https://javadoc.io/doc/org.mockito/mockito-core/latest/org.mockito/org/mockito/Mockito.html#0.3
WARNING: A Java agent has been loaded dynamically (/Users/joaobarreira/.m2/repository/net/bytebuddy/byte-buddy-agent/1.17.8/byte-buddy-agent-1.17.8.jar)
WARNING: If a serviceability tool is in use, please run with -XX:+EnableDynamicAgentLoading to hide this warning
WARNING: If a serviceability tool is not in use, please run with -Djdk.instrument.traceUsage for more information
WARNING: Dynamic loading of agents will be disallowed by default in a future release
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 5.239 s -- in tqs.backend.tqsbackend.TqsbackendApplicationTests
[INFO] Running tqs.backend.tqsbackend.repository.BookingRepositoryTest
2025-12-11T01:14:12.231Z  INFO 34677 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [tqs.backend.tqsbackend.repository.BookingRepositoryTest]: BookingRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-11T01:14:12.244Z  INFO 34677 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration tqs.backend.tqsbackend.TqsbackendApplication for test class tqs.backend.tqsbackend.repository.BookingRepositoryTest
2025-12-11T01:14:12.246Z  INFO 34677 --- [           main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.7)

2025-12-11T01:14:12.260Z  INFO 34677 --- [           main] t.b.t.repository.BookingRepositoryTest   : Starting BookingRepositoryTest using Java 21.0.2 with PID 34677 (started by joaobarreira in /Users/joaobarreira/Desktop/3ano1semestre/TQS/PartyShare/tqsbackend)
2025-12-11T01:14:12.261Z DEBUG 34677 --- [           main] t.b.t.repository.BookingRepositoryTest   : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-12-11T01:14:12.261Z  INFO 34677 --- [           main] t.b.t.repository.BookingRepositoryTest   : The following 1 profile is active: "dev"
2025-12-11T01:14:12.304Z  INFO 34677 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-11T01:14:12.313Z  INFO 34677 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 8 ms. Found 8 JPA repository interfaces.
2025-12-11T01:14:12.321Z  INFO 34677 --- [           main] beddedDataSourceBeanFactoryPostProcessor : Replacing 'dataSource' DataSource bean with embedded version
2025-12-11T01:14:12.331Z  INFO 34677 --- [           main] o.s.j.d.e.EmbeddedDatabaseFactory        : Starting embedded database: url='jdbc:h2:mem:c031bc5a-9123-4b31-8799-48a1f90666d6;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2025-12-11T01:14:12.342Z  INFO 34677 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-11T01:14:12.344Z  INFO 34677 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-11T01:14:12.347Z  INFO 34677 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-11T01:14:12.349Z  WARN 34677 --- [           main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-11T01:14:12.349Z  INFO 34677 --- [           main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseFactory$EmbeddedDataSourceProxy@57077bf0']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-11T01:14:12.386Z  INFO 34677 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
Hibernate: 
    drop table if exists bookings cascade 
Hibernate: 
    drop table if exists categories cascade 
Hibernate: 
    drop table if exists favorites cascade 
Hibernate: 
    drop table if exists items cascade 
Hibernate: 
    drop table if exists messages cascade 
Hibernate: 
    drop table if exists ratings cascade 
Hibernate: 
    drop table if exists reports cascade 
Hibernate: 
    drop table if exists users cascade 
Hibernate: 
    create table bookings (
        daily_price numeric(12,2) not null,
        end_date date not null,
        start_date date not null,
        total_price numeric(14,2) not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        item_id bigint not null,
        renter_id bigint not null,
        updated_at timestamp(6),
        payment_reference varchar(255),
        payment_status enum ('FAILED','PAID','PENDING') not null,
        status enum ('ACCEPTED','CANCELLED','COUNTER_OFFER','REJECTED','REQUESTED') not null,
        primary key (id)
    )
Hibernate: 
    create table categories (
        id bigint generated by default as identity,
        name varchar(255) not null unique,
        primary key (id)
    )
Hibernate: 
    create table favorites (
        id bigint generated by default as identity,
        item_id bigint not null,
        user_id bigint not null,
        primary key (id)
    )
Hibernate: 
    create table items (
        average_rating float(53),
        is_active boolean not null,
        price float(53) not null,
        category_id bigint not null,
        id bigint generated by default as identity,
        owner_id bigint,
        description varchar(1000),
        image_url varchar(255),
        location varchar(255),
        name varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table messages (
        is_read boolean not null,
        id bigint generated by default as identity,
        item_id bigint,
        receiver_id bigint not null,
        sender_id bigint not null,
        sent_at timestamp(6) not null,
        content varchar(2000) not null,
        primary key (id)
    )
Hibernate: 
    create table ratings (
        rate integer not null,
        id bigint generated by default as identity,
        rated_id bigint not null,
        sender_id bigint not null,
        comment varchar(512),
        rating_type enum ('OWNER','PRODUCT') not null,
        primary key (id)
    )
Hibernate: 
    create table reports (
        id bigint generated by default as identity,
        sender_id bigint not null,
        title varchar(128) not null,
        description varchar(4096) not null,
        state enum ('CLOSED','IN_PROGRESS','NEW') not null,
        primary key (id)
    )
Hibernate: 
    create table users (
        is_active boolean not null,
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        name varchar(255) not null,
        password_hash varchar(255) not null,
        role enum ('ADMIN','OWNER','RENTER') not null,
        primary key (id)
    )
Hibernate: 
    alter table if exists bookings 
       add constraint FKbtv44e8p4a4pq8hfuakjbtfpc 
       foreign key (item_id) 
       references items
Hibernate: 
    alter table if exists favorites 
       add constraint FKqknl7abn519k6qg1cquvnca4i 
       foreign key (item_id) 
       references items
Hibernate: 
    alter table if exists items 
       add constraint FKjcdcde7htb3tyjgouo4g9xbmr 
       foreign key (category_id) 
       references categories
2025-12-11T01:14:12.394Z  INFO 34677 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-11T01:14:12.446Z  INFO 34677 --- [           main] t.b.t.repository.BookingRepositoryTest   : Started BookingRepositoryTest in 0.2 seconds (process running for 6.444)
Hibernate: 
    insert 
    into
        categories
        (name, id) 
    values
        (?, default)
Hibernate: 
    insert 
    into
        items
        (average_rating, category_id, description, image_url, is_active, location, name, owner_id, price, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        bookings
        (created_at, daily_price, end_date, item_id, payment_reference, payment_status, renter_id, start_date, status, total_price, updated_at, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
Hibernate: 
    select
        b1_0.id 
    from
        bookings b1_0 
    join
        items i1_0 
            on i1_0.id=b1_0.item_id 
    where
        i1_0.id=? 
        and b1_0.status in (?, ?) 
        and b1_0.start_date<? 
        and b1_0.end_date>? 
    fetch
        first ? rows only
Hibernate: 
    select
        b1_0.id 
    from
        bookings b1_0 
    join
        items i1_0 
            on i1_0.id=b1_0.item_id 
    where
        i1_0.id=? 
        and b1_0.status in (?, ?) 
        and b1_0.start_date<? 
        and b1_0.end_date>? 
    fetch
        first ? rows only
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.253 s -- in tqs.backend.tqsbackend.repository.BookingRepositoryTest
[INFO] Running tqs.backend.tqsbackend.repository.ReportRepositoryTest
2025-12-11T01:14:12.484Z  INFO 34677 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [tqs.backend.tqsbackend.repository.ReportRepositoryTest]: ReportRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-11T01:14:12.489Z  INFO 34677 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration tqs.backend.tqsbackend.TqsbackendApplication for test class tqs.backend.tqsbackend.repository.ReportRepositoryTest
2025-12-11T01:14:12.490Z  INFO 34677 --- [           main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.7)

2025-12-11T01:14:12.505Z  INFO 34677 --- [           main] t.b.t.repository.ReportRepositoryTest    : Starting ReportRepositoryTest using Java 21.0.2 with PID 34677 (started by joaobarreira in /Users/joaobarreira/Desktop/3ano1semestre/TQS/PartyShare/tqsbackend)
2025-12-11T01:14:12.505Z DEBUG 34677 --- [           main] t.b.t.repository.ReportRepositoryTest    : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-12-11T01:14:12.505Z  INFO 34677 --- [           main] t.b.t.repository.ReportRepositoryTest    : No active profile set, falling back to 1 default profile: "default"
2025-12-11T01:14:12.547Z  INFO 34677 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-11T01:14:12.557Z  INFO 34677 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 8 JPA repository interfaces.
2025-12-11T01:14:12.564Z  INFO 34677 --- [           main] beddedDataSourceBeanFactoryPostProcessor : Replacing 'dataSource' DataSource bean with embedded version
2025-12-11T01:14:12.568Z  INFO 34677 --- [           main] o.s.j.d.e.EmbeddedDatabaseFactory        : Starting embedded database: url='jdbc:h2:mem:5758efb8-832e-4de6-8395-f17b7a1a2b32;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2025-12-11T01:14:12.585Z  INFO 34677 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-11T01:14:12.586Z  INFO 34677 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-11T01:14:12.590Z  INFO 34677 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-11T01:14:12.591Z  WARN 34677 --- [           main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-11T01:14:12.591Z  INFO 34677 --- [           main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseFactory$EmbeddedDataSourceProxy@4f84da36']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-11T01:14:12.627Z  INFO 34677 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
Hibernate: drop table if exists bookings cascade 
Hibernate: drop table if exists categories cascade 
Hibernate: drop table if exists favorites cascade 
Hibernate: drop table if exists items cascade 
Hibernate: drop table if exists messages cascade 
Hibernate: drop table if exists ratings cascade 
Hibernate: drop table if exists reports cascade 
Hibernate: drop table if exists users cascade 
Hibernate: create table bookings (daily_price numeric(12,2) not null, end_date date not null, start_date date not null, total_price numeric(14,2) not null, created_at timestamp(6), id bigint generated by default as identity, item_id bigint not null, renter_id bigint not null, updated_at timestamp(6), payment_reference varchar(255), payment_status enum ('FAILED','PAID','PENDING') not null, status enum ('ACCEPTED','CANCELLED','COUNTER_OFFER','REJECTED','REQUESTED') not null, primary key (id))
Hibernate: create table categories (id bigint generated by default as identity, name varchar(255) not null unique, primary key (id))
Hibernate: create table favorites (id bigint generated by default as identity, item_id bigint not null, user_id bigint not null, primary key (id))
Hibernate: create table items (average_rating float(53), is_active boolean not null, price float(53) not null, category_id bigint not null, id bigint generated by default as identity, owner_id bigint, description varchar(1000), image_url varchar(255), location varchar(255), name varchar(255) not null, primary key (id))
Hibernate: create table messages (is_read boolean not null, id bigint generated by default as identity, item_id bigint, receiver_id bigint not null, sender_id bigint not null, sent_at timestamp(6) not null, content varchar(2000) not null, primary key (id))
Hibernate: create table ratings (rate integer not null, id bigint generated by default as identity, rated_id bigint not null, sender_id bigint not null, comment varchar(512), rating_type enum ('OWNER','PRODUCT') not null, primary key (id))
Hibernate: create table reports (id bigint generated by default as identity, sender_id bigint not null, title varchar(128) not null, description varchar(4096) not null, state enum ('CLOSED','IN_PROGRESS','NEW') not null, primary key (id))
Hibernate: create table users (is_active boolean not null, id bigint generated by default as identity, email varchar(255) not null unique, name varchar(255) not null, password_hash varchar(255) not null, role enum ('ADMIN','OWNER','RENTER') not null, primary key (id))
Hibernate: alter table if exists bookings add constraint FKbtv44e8p4a4pq8hfuakjbtfpc foreign key (item_id) references items
Hibernate: alter table if exists favorites add constraint FKqknl7abn519k6qg1cquvnca4i foreign key (item_id) references items
Hibernate: alter table if exists items add constraint FKjcdcde7htb3tyjgouo4g9xbmr foreign key (category_id) references categories
2025-12-11T01:14:12.634Z  INFO 34677 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-11T01:14:12.679Z  INFO 34677 --- [           main] t.b.t.repository.ReportRepositoryTest    : Started ReportRepositoryTest in 0.189 seconds (process running for 6.676)
Hibernate: insert into reports (description,sender_id,state,title,id) values (?,?,?,?,default)
Hibernate: insert into reports (description,sender_id,state,title,id) values (?,?,?,?,default)
Hibernate: select r1_0.id,r1_0.description,r1_0.sender_id,r1_0.state,r1_0.title from reports r1_0 where r1_0.id=?
Hibernate: insert into reports (description,sender_id,state,title,id) values (?,?,?,?,default)
Hibernate: insert into reports (description,sender_id,state,title,id) values (?,?,?,?,default)
Hibernate: select r1_0.id,r1_0.description,r1_0.sender_id,r1_0.state,r1_0.title from reports r1_0 where r1_0.sender_id=?
Hibernate: select r1_0.id,r1_0.description,r1_0.sender_id,r1_0.state,r1_0.title from reports r1_0 where r1_0.sender_id=?
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.274 s -- in tqs.backend.tqsbackend.repository.ReportRepositoryTest
[INFO] Running tqs.backend.tqsbackend.entity.ItemTest
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 s -- in tqs.backend.tqsbackend.entity.ItemTest
[INFO] Running tqs.backend.tqsbackend.entity.MessageTest
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.002 s -- in tqs.backend.tqsbackend.entity.MessageTest
[INFO] Running tqs.backend.tqsbackend.entity.EntityTest
[INFO] Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 s -- in tqs.backend.tqsbackend.entity.EntityTest
[INFO] Running tqs.backend.tqsbackend.controller.IT_ItemControllerTest
2025-12-11T01:14:12.769Z  INFO 34677 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [tqs.backend.tqsbackend.controller.IT_ItemControllerTest]: IT_ItemControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-11T01:14:12.777Z  INFO 34677 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration tqs.backend.tqsbackend.TqsbackendApplication for test class tqs.backend.tqsbackend.controller.IT_ItemControllerTest
2025-12-11T01:14:12.778Z  INFO 34677 --- [           main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.7)

2025-12-11T01:14:12.786Z  INFO 34677 --- [           main] t.b.t.controller.IT_ItemControllerTest   : Starting IT_ItemControllerTest using Java 21.0.2 with PID 34677 (started by joaobarreira in /Users/joaobarreira/Desktop/3ano1semestre/TQS/PartyShare/tqsbackend)
2025-12-11T01:14:12.786Z DEBUG 34677 --- [           main] t.b.t.controller.IT_ItemControllerTest   : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-12-11T01:14:12.786Z  INFO 34677 --- [           main] t.b.t.controller.IT_ItemControllerTest   : No active profile set, falling back to 1 default profile: "default"
2025-12-11T01:14:12.787Z DEBUG 34677 --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@73a67ef1
2025-12-11T01:14:12.891Z  INFO 34677 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-11T01:14:12.899Z  INFO 34677 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 7 ms. Found 8 JPA repository interfaces.
2025-12-11T01:14:12.944Z  INFO 34677 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-11T01:14:12.946Z  INFO 34677 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-11T01:14:12.949Z  INFO 34677 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-11T01:14:12.949Z  INFO 34677 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-12-11T01:14:12.950Z  INFO 34677 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn21: url=jdbc:h2:mem:testdb user=SA
2025-12-11T01:14:12.950Z  INFO 34677 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-12-11T01:14:12.950Z  WARN 34677 --- [           main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-11T01:14:12.951Z  INFO 34677 --- [           main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-11T01:14:13.000Z  INFO 34677 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-11T01:14:13.012Z  INFO 34677 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
Mock data initialized: 3 owners and 5 items created!
2025-12-11T01:14:13.293Z  WARN 34677 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-11T01:14:13.310Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 72 mappings in 'requestMappingHandlerMapping'
2025-12-11T01:14:13.322Z DEBUG 34677 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-11T01:14:13.325Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-11T01:14:13.329Z DEBUG 34677 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-11T01:14:13.362Z DEBUG 34677 --- [           main] o.s.w.f.ServerHttpObservationFilter      : Filter 'webMvcObservationFilter' configured for use
2025-12-11T01:14:13.363Z  INFO 34677 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-11T01:14:13.363Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-11T01:14:13.364Z  INFO 34677 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint beneath base path '/actuator'
2025-12-11T01:14:13.368Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 4 ms
2025-12-11T01:14:13.379Z  INFO 34677 --- [           main] t.b.t.controller.IT_ItemControllerTest   : Started IT_ItemControllerTest in 0.601 seconds (process running for 7.376)
2025-12-11T01:14:13.412Z  WARN 34677 --- [           main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'POST' is not supported]

MockHttpServletRequest:
      HTTP Method = POST
      Request URI = /items/6
       Parameters = {name=[Updated Name], description=[Updated Desc], price=[15.0], categoryId=[4], location=[Lisbon]}
          Headers = [Content-Type:"application/x-www-form-urlencoded;charset=UTF-8"]
             Body = null
    Session Attrs = {userId=4}

Handler:
             Type = null

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = org.springframework.web.HttpRequestMethodNotSupportedException

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 405
    Error message = Method 'POST' is not supported.
          Headers = [Allow:"GET"]
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
2025-12-11T01:14:13.428Z  WARN 34677 --- [           main] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 23505, SQLState: 23505
2025-12-11T01:14:13.428Z ERROR 34677 --- [           main] o.h.engine.jdbc.spi.SqlExceptionHelper   : Unique index or primary key violation: "PUBLIC.CONSTRAINT_INDEX_6 ON PUBLIC.CATEGORIES(NAME NULLS FIRST) VALUES ( /* 1 */ 'Electronics' )"; SQL statement:
insert into categories (name,id) values (?,default) [23505-232]
[ERROR] Tests run: 2, Failures: 1, Errors: 1, Skipped: 0, Time elapsed: 0.665 s <<< FAILURE! -- in tqs.backend.tqsbackend.controller.IT_ItemControllerTest
[ERROR] tqs.backend.tqsbackend.controller.IT_ItemControllerTest.updateItem_WithValidData_UpdatesItem -- Time elapsed: 0.041 s <<< FAILURE!
java.lang.AssertionError: Range for response status value 405 expected:<REDIRECTION> but was:<CLIENT_ERROR>
	at org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:61)
	at org.springframework.test.util.AssertionErrors.assertEquals(AssertionErrors.java:128)
	at org.springframework.test.web.servlet.result.StatusResultMatchers.lambda$is3xxRedirection$4(StatusResultMatchers.java:88)
	at org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:214)
	at tqs.backend.tqsbackend.controller.IT_ItemControllerTest.updateItem_WithValidData_UpdatesItem(IT_ItemControllerTest.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)

[ERROR] tqs.backend.tqsbackend.controller.IT_ItemControllerTest.createItem_WithValidData_RedirectsToMyItems -- Time elapsed: 0.010 s <<< ERROR!
org.springframework.dao.DataIntegrityViolationException: 
could not execute statement [Unique index or primary key violation: "PUBLIC.CONSTRAINT_INDEX_6 ON PUBLIC.CATEGORIES(NAME NULLS FIRST) VALUES ( /* 1 */ 'Electronics' )"; SQL statement:
insert into categories (name,id) values (?,default) [23505-232]] [insert into categories (name,id) values (?,default)]; SQL [insert into categories (name,id) values (?,default)]; constraint [PUBLIC.CONSTRAINT_INDEX_6]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:294)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:256)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:560)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:343)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:160)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:165)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223)
	at jdk.proxy2/jdk.proxy2.$Proxy178.save(Unknown Source)
	at tqs.backend.tqsbackend.controller.IT_ItemControllerTest.createItem_WithValidData_RedirectsToMyItems(IT_ItemControllerTest.java:55)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement [Unique index or primary key violation: "PUBLIC.CONSTRAINT_INDEX_6 ON PUBLIC.CATEGORIES(NAME NULLS FIRST) VALUES ( /* 1 */ 'Electronics' )"; SQL statement:
insert into categories (name,id) values (?,default) [23505-232]] [insert into categories (name,id) values (?,default)]
	at org.hibernate.dialect.H2Dialect.lambda$buildSQLExceptionConversionDelegate$3(H2Dialect.java:759)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.id.insert.GetGeneratedKeysDelegate.performMutation(GetGeneratedKeysDelegate.java:116)
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:47)
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:95)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:85)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:682)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:293)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:274)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:324)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:394)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:308)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:224)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:136)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:177)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:95)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:79)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:761)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:745)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:320)
	at jdk.proxy2/jdk.proxy2.$Proxy170.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:654)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:277)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:515)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:284)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:734)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:174)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:149)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:69)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	... 9 more
Caused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: "PUBLIC.CONSTRAINT_INDEX_6 ON PUBLIC.CATEGORIES(NAME NULLS FIRST) VALUES ( /* 1 */ 'Electronics' )"; SQL statement:
insert into categories (name,id) values (?,default) [23505-232]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:520)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.index.Index.getDuplicateKeyException(Index.java:523)
	at org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)
	at org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)
	at org.h2.mvstore.db.MVTable.addRow(MVTable.java:517)
	at org.h2.command.dml.Insert.insertRows(Insert.java:174)
	at org.h2.command.dml.Insert.update(Insert.java:135)
	at org.h2.command.CommandContainer.executeUpdateWithGeneratedKeys(CommandContainer.java:212)
	at org.h2.command.CommandContainer.update(CommandContainer.java:133)
	at org.h2.command.Command.executeUpdate(Command.java:304)
	at org.h2.command.Command.executeUpdate(Command.java:248)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:213)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:172)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:194)
	... 55 more

[INFO] Running tqs.backend.tqsbackend.controller.UserControllerTest
2025-12-11T01:14:13.437Z  INFO 34677 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [tqs.backend.tqsbackend.controller.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-11T01:14:13.441Z  INFO 34677 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration tqs.backend.tqsbackend.TqsbackendApplication for test class tqs.backend.tqsbackend.controller.UserControllerTest
2025-12-11T01:14:13.442Z  INFO 34677 --- [           main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.7)

2025-12-11T01:14:13.450Z  INFO 34677 --- [           main] t.b.t.controller.UserControllerTest      : Starting UserControllerTest using Java 21.0.2 with PID 34677 (started by joaobarreira in /Users/joaobarreira/Desktop/3ano1semestre/TQS/PartyShare/tqsbackend)
2025-12-11T01:14:13.450Z DEBUG 34677 --- [           main] t.b.t.controller.UserControllerTest      : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-12-11T01:14:13.451Z  INFO 34677 --- [           main] t.b.t.controller.UserControllerTest      : No active profile set, falling back to 1 default profile: "default"
2025-12-11T01:14:13.451Z DEBUG 34677 --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@628a4bf4
2025-12-11T01:14:13.703Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 8 mappings in 'requestMappingHandlerMapping'
2025-12-11T01:14:13.738Z DEBUG 34677 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-11T01:14:13.743Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-11T01:14:13.753Z DEBUG 34677 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-11T01:14:13.762Z  INFO 34677 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-11T01:14:13.762Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-11T01:14:13.763Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-12-11T01:14:13.771Z  INFO 34677 --- [           main] t.b.t.controller.UserControllerTest      : Started UserControllerTest in 0.329 seconds (process running for 7.768)
2025-12-11T01:14:13.782Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.UserController#login(Model)
2025-12-11T01:14:13.819Z DEBUG 34677 --- [           main] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [*/*]
2025-12-11T01:14:14.151Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.UserController#login(String, String, Model, RedirectAttributes, HttpSession, HttpServletRequest)
2025-12-11T01:14:14.168Z DEBUG 34677 --- [           main] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [*/*]
2025-12-11T01:14:14.267Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.UserController#register(Model)
2025-12-11T01:14:14.269Z DEBUG 34677 --- [           main] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [*/*]
2025-12-11T01:14:14.299Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.UserController#register(UserRegistrationDto, RedirectAttributes, Model)
2025-12-11T01:14:14.303Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:14.314Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.UserController#profile(Model, HttpSession)
2025-12-11T01:14:14.315Z DEBUG 34677 --- [           main] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [*/*]
2025-12-11T01:14:14.326Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.UserController#register(UserRegistrationDto, RedirectAttributes, Model)
2025-12-11T01:14:14.327Z DEBUG 34677 --- [           main] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [*/*]
2025-12-11T01:14:14.332Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.UserController#register(UserRegistrationDto, RedirectAttributes, Model)
2025-12-11T01:14:14.333Z DEBUG 34677 --- [           main] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [*/*]
2025-12-11T01:14:14.338Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.UserController#login(String, String, Model, RedirectAttributes, HttpSession, HttpServletRequest)
2025-12-11T01:14:14.338Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:14.342Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.UserController#profile(Model, HttpSession)
2025-12-11T01:14:14.342Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
[INFO] Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.908 s -- in tqs.backend.tqsbackend.controller.UserControllerTest
[INFO] Running tqs.backend.tqsbackend.controller.ReportControllerTest
2025-12-11T01:14:14.347Z  INFO 34677 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [tqs.backend.tqsbackend.controller.ReportControllerTest]: ReportControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-11T01:14:14.355Z  INFO 34677 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration tqs.backend.tqsbackend.TqsbackendApplication for test class tqs.backend.tqsbackend.controller.ReportControllerTest
2025-12-11T01:14:14.357Z  INFO 34677 --- [           main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.7)

2025-12-11T01:14:14.373Z  INFO 34677 --- [           main] t.b.t.controller.ReportControllerTest    : Starting ReportControllerTest using Java 21.0.2 with PID 34677 (started by joaobarreira in /Users/joaobarreira/Desktop/3ano1semestre/TQS/PartyShare/tqsbackend)
2025-12-11T01:14:14.373Z DEBUG 34677 --- [           main] t.b.t.controller.ReportControllerTest    : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-12-11T01:14:14.373Z  INFO 34677 --- [           main] t.b.t.controller.ReportControllerTest    : No active profile set, falling back to 1 default profile: "default"
2025-12-11T01:14:14.374Z DEBUG 34677 --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@67514552
2025-12-11T01:14:14.551Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 4 mappings in 'requestMappingHandlerMapping'
2025-12-11T01:14:14.567Z DEBUG 34677 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-11T01:14:14.569Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-11T01:14:14.574Z DEBUG 34677 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-11T01:14:14.581Z  INFO 34677 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-11T01:14:14.581Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-11T01:14:14.581Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-12-11T01:14:14.585Z  INFO 34677 --- [           main] t.b.t.controller.ReportControllerTest    : Started ReportControllerTest in 0.228 seconds (process running for 8.583)
2025-12-11T01:14:14.588Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ReportController#createReport(String, String, HttpSession, RedirectAttributes)
2025-12-11T01:14:14.592Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:14.596Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ReportController#listReports(HttpSession, Model)
2025-12-11T01:14:14.597Z DEBUG 34677 --- [           main] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [*/*]
2025-12-11T01:14:14.638Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ReportController#createReport(String, String, HttpSession, RedirectAttributes)
2025-12-11T01:14:14.638Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:14.642Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ReportController#createReport(String, String, HttpSession, RedirectAttributes)
2025-12-11T01:14:14.643Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:14.646Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ReportController#listReports(HttpSession, Model)
2025-12-11T01:14:14.646Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.301 s -- in tqs.backend.tqsbackend.controller.ReportControllerTest
[INFO] Running tqs.backend.tqsbackend.controller.PaymentControllerTest
2025-12-11T01:14:14.651Z  INFO 34677 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [tqs.backend.tqsbackend.controller.PaymentControllerTest]: PaymentControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-11T01:14:14.659Z  INFO 34677 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration tqs.backend.tqsbackend.TqsbackendApplication for test class tqs.backend.tqsbackend.controller.PaymentControllerTest
2025-12-11T01:14:14.661Z  INFO 34677 --- [           main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.7)

2025-12-11T01:14:14.673Z  INFO 34677 --- [           main] t.b.t.controller.PaymentControllerTest   : Starting PaymentControllerTest using Java 21.0.2 with PID 34677 (started by joaobarreira in /Users/joaobarreira/Desktop/3ano1semestre/TQS/PartyShare/tqsbackend)
2025-12-11T01:14:14.673Z DEBUG 34677 --- [           main] t.b.t.controller.PaymentControllerTest   : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-12-11T01:14:14.673Z  INFO 34677 --- [           main] t.b.t.controller.PaymentControllerTest   : No active profile set, falling back to 1 default profile: "default"
2025-12-11T01:14:14.674Z DEBUG 34677 --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@792de1a
2025-12-11T01:14:14.822Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 6 mappings in 'requestMappingHandlerMapping'
2025-12-11T01:14:14.837Z DEBUG 34677 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-11T01:14:14.839Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-11T01:14:14.843Z DEBUG 34677 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-11T01:14:14.847Z  INFO 34677 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-11T01:14:14.847Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-11T01:14:14.848Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-12-11T01:14:14.851Z  INFO 34677 --- [           main] t.b.t.controller.PaymentControllerTest   : Started PaymentControllerTest in 0.19 seconds (process running for 8.849)
2025-12-11T01:14:14.856Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.PaymentController#createCheckoutSession(Long, HttpServletRequest)
2025-12-11T01:14:15.000Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:15.001Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Your API key is invalid, as it is an empty string. You can double-check your API key from the (truncated)...]
2025-12-11T01:14:15.022Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.PaymentController#showPaymentPage(Long, Model)
2025-12-11T01:14:15.024Z DEBUG 34677 --- [           main] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [*/*]
2025-12-11T01:14:15.078Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.PaymentController#paymentSuccess(Long, Model)
2025-12-11T01:14:15.079Z DEBUG 34677 --- [           main] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [*/*]
2025-12-11T01:14:15.085Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.PaymentController#showPaymentPage(Long, Model)
2025-12-11T01:14:15.086Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:15.088Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.PaymentController#createCheckoutSession(Long, HttpServletRequest)
2025-12-11T01:14:15.089Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:15.089Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Booking not found}]
2025-12-11T01:14:15.092Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.PaymentController#paymentCancel(Long, Model)
2025-12-11T01:14:15.092Z DEBUG 34677 --- [           main] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [*/*]
[INFO] Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.452 s -- in tqs.backend.tqsbackend.controller.PaymentControllerTest
[INFO] Running tqs.backend.tqsbackend.controller.IT_MessageRestControllerTest
2025-12-11T01:14:15.110Z  INFO 34677 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration tqs.backend.tqsbackend.TqsbackendApplication for test class tqs.backend.tqsbackend.controller.IT_MessageRestControllerTest
2025-12-11T01:14:15.111Z  INFO 34677 --- [           main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.7)

2025-12-11T01:14:15.122Z  INFO 34677 --- [           main] t.b.t.c.IT_MessageRestControllerTest     : Starting IT_MessageRestControllerTest using Java 21.0.2 with PID 34677 (started by joaobarreira in /Users/joaobarreira/Desktop/3ano1semestre/TQS/PartyShare/tqsbackend)
2025-12-11T01:14:15.122Z DEBUG 34677 --- [           main] t.b.t.c.IT_MessageRestControllerTest     : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-12-11T01:14:15.122Z  INFO 34677 --- [           main] t.b.t.c.IT_MessageRestControllerTest     : No active profile set, falling back to 1 default profile: "default"
2025-12-11T01:14:15.123Z DEBUG 34677 --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@1dc6211f
2025-12-11T01:14:15.263Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 5 mappings in 'requestMappingHandlerMapping'
2025-12-11T01:14:15.274Z DEBUG 34677 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-11T01:14:15.275Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-11T01:14:15.279Z DEBUG 34677 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-11T01:14:15.282Z  INFO 34677 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-11T01:14:15.282Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-11T01:14:15.283Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-12-11T01:14:15.286Z  INFO 34677 --- [           main] t.b.t.c.IT_MessageRestControllerTest     : Started IT_MessageRestControllerTest in 0.175 seconds (process running for 9.284)
2025-12-11T01:14:15.296Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.MessageRestController#getMessages(Long)
2025-12-11T01:14:15.303Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:15.303Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[tqs.backend.tqsbackend.dto.MessageResponse@4a83da04, tqs.backend.tqsbackend.dto.MessageResponse@aa6 (truncated)...]
2025-12-11T01:14:15.392Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.MessageRestController#sendMessage(Long, MessageCreateRequest)
2025-12-11T01:14:15.431Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [tqs.backend.tqsbackend.dto.MessageCreateRequest@b135265]
2025-12-11T01:14:15.464Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:15.464Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [tqs.backend.tqsbackend.dto.MessageResponse@2ea8f761]
2025-12-11T01:14:15.470Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.MessageRestController#getConversation(Long, Long)
2025-12-11T01:14:15.471Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:15.471Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[tqs.backend.tqsbackend.dto.MessageResponse@583ff5fd, tqs.backend.tqsbackend.dto.MessageResponse@77a (truncated)...]
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.369 s -- in tqs.backend.tqsbackend.controller.IT_MessageRestControllerTest
[INFO] Running tqs.backend.tqsbackend.controller.FavoriteControllerIntegrationTest
2025-12-11T01:14:15.475Z  INFO 34677 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [tqs.backend.tqsbackend.controller.FavoriteControllerIntegrationTest]: FavoriteControllerIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-11T01:14:15.477Z  INFO 34677 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration tqs.backend.tqsbackend.TqsbackendApplication for test class tqs.backend.tqsbackend.controller.FavoriteControllerIntegrationTest
2025-12-11T01:14:15.500Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.FavoriteController#addFavorite(Long, HttpSession, HttpServletRequest, RedirectAttributes)
2025-12-11T01:14:15.509Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:15.520Z DEBUG 34677 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-12-11T01:14:15.522Z DEBUG 34677 --- [           main] o.s.w.s.r.ResourceHttpRequestHandler     : Resource not found
2025-12-11T01:14:15.522Z DEBUG 34677 --- [           main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource favorites/1/1.]
2025-12-11T01:14:15.523Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.FavoriteController#removeFavorite(Long, HttpSession, HttpServletRequest, RedirectAttributes)
2025-12-11T01:14:15.527Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:15.535Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.FavoriteController#addFavorite(Long, HttpSession, HttpServletRequest, RedirectAttributes)
2025-12-11T01:14:15.538Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:15.546Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.FavoriteController#addFavorite(Long, HttpSession, HttpServletRequest, RedirectAttributes)
2025-12-11T01:14:15.549Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:15.550Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.FavoriteController#removeFavorite(Long, HttpSession, HttpServletRequest, RedirectAttributes)
2025-12-11T01:14:15.555Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.085 s -- in tqs.backend.tqsbackend.controller.FavoriteControllerIntegrationTest
[INFO] Running tqs.backend.tqsbackend.controller.UserRestControllerIntegrationTest
2025-12-11T01:14:15.561Z  INFO 34677 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [tqs.backend.tqsbackend.controller.UserRestControllerIntegrationTest]: UserRestControllerIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-11T01:14:15.562Z  INFO 34677 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration tqs.backend.tqsbackend.TqsbackendApplication for test class tqs.backend.tqsbackend.controller.UserRestControllerIntegrationTest
2025-12-11T01:14:15.564Z  INFO 34677 --- [           main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.7)

2025-12-11T01:14:15.576Z  INFO 34677 --- [           main] .b.t.c.UserRestControllerIntegrationTest : Starting UserRestControllerIntegrationTest using Java 21.0.2 with PID 34677 (started by joaobarreira in /Users/joaobarreira/Desktop/3ano1semestre/TQS/PartyShare/tqsbackend)
2025-12-11T01:14:15.576Z DEBUG 34677 --- [           main] .b.t.c.UserRestControllerIntegrationTest : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-12-11T01:14:15.576Z  INFO 34677 --- [           main] .b.t.c.UserRestControllerIntegrationTest : The following 1 profile is active: "dev"
2025-12-11T01:14:15.576Z DEBUG 34677 --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@752ea362
2025-12-11T01:14:15.767Z  INFO 34677 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-11T01:14:15.776Z  INFO 34677 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 8 ms. Found 8 JPA repository interfaces.
2025-12-11T01:14:15.856Z  INFO 34677 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-11T01:14:15.859Z  INFO 34677 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-11T01:14:15.865Z  INFO 34677 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-11T01:14:15.867Z  INFO 34677 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2025-12-11T01:14:15.867Z  INFO 34677 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn31: url=jdbc:h2:mem:testdb user=SA
2025-12-11T01:14:15.867Z  INFO 34677 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2025-12-11T01:14:15.868Z  WARN 34677 --- [           main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-11T01:14:15.868Z  INFO 34677 --- [           main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-3)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-11T01:14:15.923Z  INFO 34677 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
Hibernate: 
    drop table if exists bookings cascade 
Hibernate: 
    drop table if exists categories cascade 
Hibernate: 
    drop table if exists favorites cascade 
Hibernate: 
    drop table if exists items cascade 
Hibernate: 
    drop table if exists messages cascade 
Hibernate: 
    drop table if exists ratings cascade 
Hibernate: 
    drop table if exists reports cascade 
Hibernate: 
    drop table if exists users cascade 
Hibernate: 
    create table bookings (
        daily_price numeric(12,2) not null,
        end_date date not null,
        start_date date not null,
        total_price numeric(14,2) not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        item_id bigint not null,
        renter_id bigint not null,
        updated_at timestamp(6),
        payment_reference varchar(255),
        payment_status enum ('FAILED','PAID','PENDING') not null,
        status enum ('ACCEPTED','CANCELLED','COUNTER_OFFER','REJECTED','REQUESTED') not null,
        primary key (id)
    )
Hibernate: 
    create table categories (
        id bigint generated by default as identity,
        name varchar(255) not null unique,
        primary key (id)
    )
Hibernate: 
    create table favorites (
        id bigint generated by default as identity,
        item_id bigint not null,
        user_id bigint not null,
        primary key (id)
    )
Hibernate: 
    create table items (
        average_rating float(53),
        is_active boolean not null,
        price float(53) not null,
        category_id bigint not null,
        id bigint generated by default as identity,
        owner_id bigint,
        description varchar(1000),
        image_url varchar(255),
        location varchar(255),
        name varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table messages (
        is_read boolean not null,
        id bigint generated by default as identity,
        item_id bigint,
        receiver_id bigint not null,
        sender_id bigint not null,
        sent_at timestamp(6) not null,
        content varchar(2000) not null,
        primary key (id)
    )
Hibernate: 
    create table ratings (
        rate integer not null,
        id bigint generated by default as identity,
        rated_id bigint not null,
        sender_id bigint not null,
        comment varchar(512),
        rating_type enum ('OWNER','PRODUCT') not null,
        primary key (id)
    )
Hibernate: 
    create table reports (
        id bigint generated by default as identity,
        sender_id bigint not null,
        title varchar(128) not null,
        description varchar(4096) not null,
        state enum ('CLOSED','IN_PROGRESS','NEW') not null,
        primary key (id)
    )
Hibernate: 
    create table users (
        is_active boolean not null,
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        name varchar(255) not null,
        password_hash varchar(255) not null,
        role enum ('ADMIN','OWNER','RENTER') not null,
        primary key (id)
    )
Hibernate: 
    alter table if exists bookings 
       add constraint FKbtv44e8p4a4pq8hfuakjbtfpc 
       foreign key (item_id) 
       references items
Hibernate: 
    alter table if exists favorites 
       add constraint FKqknl7abn519k6qg1cquvnca4i 
       foreign key (item_id) 
       references items
Hibernate: 
    alter table if exists items 
       add constraint FKjcdcde7htb3tyjgouo4g9xbmr 
       foreign key (category_id) 
       references categories
2025-12-11T01:14:15.934Z  INFO 34677 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
Hibernate: 
    select
        count(*) 
    from
        users u1_0
Hibernate: 
    select
        count(*) 
    from
        items i1_0
Hibernate: 
    insert 
    into
        users
        (email, is_active, name, password_hash, role, id) 
    values
        (?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        users
        (email, is_active, name, password_hash, role, id) 
    values
        (?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        users
        (email, is_active, name, password_hash, role, id) 
    values
        (?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        categories
        (name, id) 
    values
        (?, default)
Hibernate: 
    insert 
    into
        categories
        (name, id) 
    values
        (?, default)
Hibernate: 
    insert 
    into
        categories
        (name, id) 
    values
        (?, default)
Hibernate: 
    insert 
    into
        items
        (average_rating, category_id, description, image_url, is_active, location, name, owner_id, price, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        items
        (average_rating, category_id, description, image_url, is_active, location, name, owner_id, price, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        items
        (average_rating, category_id, description, image_url, is_active, location, name, owner_id, price, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        items
        (average_rating, category_id, description, image_url, is_active, location, name, owner_id, price, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        items
        (average_rating, category_id, description, image_url, is_active, location, name, owner_id, price, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
Mock data initialized: 3 owners and 5 items created!
2025-12-11T01:14:16.270Z  WARN 34677 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-11T01:14:16.294Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 72 mappings in 'requestMappingHandlerMapping'
2025-12-11T01:14:16.308Z DEBUG 34677 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-11T01:14:16.310Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-11T01:14:16.315Z DEBUG 34677 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-11T01:14:16.376Z  INFO 34677 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-12-11T01:14:16.381Z DEBUG 34677 --- [           main] o.s.w.f.ServerHttpObservationFilter      : Filter 'webMvcObservationFilter' configured for use
2025-12-11T01:14:16.381Z  INFO 34677 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-11T01:14:16.381Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-11T01:14:16.382Z  INFO 34677 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 13 endpoints beneath base path '/actuator'
2025-12-11T01:14:16.387Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 6 ms
2025-12-11T01:14:16.396Z  INFO 34677 --- [           main] .b.t.c.UserRestControllerIntegrationTest : Started UserRestControllerIntegrationTest in 0.832 seconds (process running for 10.394)
2025-12-11T01:14:16.400Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.UserRestController#register(UserRegistrationDto)
2025-12-11T01:14:16.408Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [tqs.backend.tqsbackend.dto.UserRegistrationDto@c961508]
Hibernate: 
    select
        u1_0.id,
        u1_0.email,
        u1_0.is_active,
        u1_0.name,
        u1_0.password_hash,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.email=?
Hibernate: 
    insert 
    into
        users
        (email, is_active, name, password_hash, role, id) 
    values
        (?, ?, ?, ?, ?, default)
2025-12-11T01:14:16.484Z  INFO 34677 --- [           main] t.b.tqsbackend.service.UserService       : User registered successfully with ID 4
2025-12-11T01:14:16.487Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:16.487Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [tqs.backend.tqsbackend.dto.UserDto@1642097b]
Hibernate: 
    select
        u1_0.id,
        u1_0.email,
        u1_0.is_active,
        u1_0.name,
        u1_0.password_hash,
        u1_0.role 
    from
        users u1_0
Hibernate: 
    select
        u1_0.id,
        u1_0.email,
        u1_0.is_active,
        u1_0.name,
        u1_0.password_hash,
        u1_0.role 
    from
        users u1_0
Hibernate: 
    delete 
    from
        users 
    where
        id=?
Hibernate: 
    delete 
    from
        users 
    where
        id=?
Hibernate: 
    delete 
    from
        users 
    where
        id=?
Hibernate: 
    delete 
    from
        users 
    where
        id=?
Hibernate: 
    insert 
    into
        users
        (email, is_active, name, password_hash, role, id) 
    values
        (?, ?, ?, ?, ?, default)
2025-12-11T01:14:16.576Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.UserRestController#login(UserLoginRequest)
2025-12-11T01:14:16.577Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [tqs.backend.tqsbackend.dto.UserLoginRequest@290b7ab3]
Hibernate: 
    select
        u1_0.id,
        u1_0.email,
        u1_0.is_active,
        u1_0.name,
        u1_0.password_hash,
        u1_0.role 
    from
        users u1_0 
    where
        u1_0.email=?
2025-12-11T01:14:16.652Z  INFO 34677 --- [           main] t.b.tqsbackend.service.UserService       : User with email john@ua.pt authenticated successfully.
2025-12-11T01:14:16.653Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2025-12-11T01:14:16.653Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["Login successful"]
Hibernate: 
    select
        u1_0.id,
        u1_0.email,
        u1_0.is_active,
        u1_0.name,
        u1_0.password_hash,
        u1_0.role 
    from
        users u1_0
Hibernate: 
    delete 
    from
        users 
    where
        id=?
Hibernate: 
    insert 
    into
        users
        (email, is_active, name, password_hash, role, id) 
    values
        (?, ?, ?, ?, ?, default)
2025-12-11T01:14:16.661Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.UserRestController#searchUsers(String, UserRoles, Boolean)
Hibernate: 
    select
        u1_0.id,
        u1_0.email,
        u1_0.is_active,
        u1_0.name,
        u1_0.password_hash,
        u1_0.role 
    from
        users u1_0
2025-12-11T01:14:16.665Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:16.665Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Writing [[tqs.backend.tqsbackend.dto.UserDto@32e29368]]
Hibernate: 
    select
        u1_0.id,
        u1_0.email,
        u1_0.is_active,
        u1_0.name,
        u1_0.password_hash,
        u1_0.role 
    from
        users u1_0
Hibernate: 
    delete 
    from
        users 
    where
        id=?
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.111 s -- in tqs.backend.tqsbackend.controller.UserRestControllerIntegrationTest
[INFO] Running tqs.backend.tqsbackend.controller.OwnerDashboardControllerTest
2025-12-11T01:14:16.676Z  INFO 34677 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration tqs.backend.tqsbackend.TqsbackendApplication for test class tqs.backend.tqsbackend.controller.OwnerDashboardControllerTest
2025-12-11T01:14:16.677Z  INFO 34677 --- [           main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.7)

2025-12-11T01:14:16.685Z  INFO 34677 --- [           main] t.b.t.c.OwnerDashboardControllerTest     : Starting OwnerDashboardControllerTest using Java 21.0.2 with PID 34677 (started by joaobarreira in /Users/joaobarreira/Desktop/3ano1semestre/TQS/PartyShare/tqsbackend)
2025-12-11T01:14:16.685Z DEBUG 34677 --- [           main] t.b.t.c.OwnerDashboardControllerTest     : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-12-11T01:14:16.685Z  INFO 34677 --- [           main] t.b.t.c.OwnerDashboardControllerTest     : No active profile set, falling back to 1 default profile: "default"
2025-12-11T01:14:16.686Z DEBUG 34677 --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@289ef663
2025-12-11T01:14:16.813Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 3 mappings in 'requestMappingHandlerMapping'
2025-12-11T01:14:16.820Z DEBUG 34677 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-11T01:14:16.821Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-11T01:14:16.823Z DEBUG 34677 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-11T01:14:16.826Z  INFO 34677 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-11T01:14:16.826Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-11T01:14:16.826Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-12-11T01:14:16.828Z  INFO 34677 --- [           main] t.b.t.c.OwnerDashboardControllerTest     : Started OwnerDashboardControllerTest in 0.151 seconds (process running for 10.826)
2025-12-11T01:14:16.832Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.OwnerDashboardController#showDashboard(Model, HttpSession)
2025-12-11T01:14:16.832Z DEBUG 34677 --- [           main] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [*/*]
2025-12-11T01:14:16.835Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.OwnerDashboardController#showDashboard(Model, HttpSession)
2025-12-11T01:14:16.836Z DEBUG 34677 --- [           main] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [*/*]
2025-12-11T01:14:16.870Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.OwnerDashboardController#showDashboard(Model, HttpSession)
2025-12-11T01:14:16.870Z DEBUG 34677 --- [           main] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [*/*]
2025-12-11T01:14:16.878Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.OwnerDashboardController#showDashboard(Model, HttpSession)
2025-12-11T01:14:16.878Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:16.880Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.OwnerDashboardController#showDashboard(Model, HttpSession)
2025-12-11T01:14:16.880Z DEBUG 34677 --- [           main] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [*/*]
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.209 s -- in tqs.backend.tqsbackend.controller.OwnerDashboardControllerTest
[INFO] Running tqs.backend.tqsbackend.controller.ReportRestControllerTest
2025-12-11T01:14:16.882Z  INFO 34677 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [tqs.backend.tqsbackend.controller.ReportRestControllerTest]: ReportRestControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-11T01:14:16.885Z  INFO 34677 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration tqs.backend.tqsbackend.TqsbackendApplication for test class tqs.backend.tqsbackend.controller.ReportRestControllerTest
2025-12-11T01:14:16.886Z  INFO 34677 --- [           main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.7)

2025-12-11T01:14:16.892Z  INFO 34677 --- [           main] t.b.t.c.ReportRestControllerTest         : Starting ReportRestControllerTest using Java 21.0.2 with PID 34677 (started by joaobarreira in /Users/joaobarreira/Desktop/3ano1semestre/TQS/PartyShare/tqsbackend)
2025-12-11T01:14:16.892Z DEBUG 34677 --- [           main] t.b.t.c.ReportRestControllerTest         : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-12-11T01:14:16.892Z  INFO 34677 --- [           main] t.b.t.c.ReportRestControllerTest         : No active profile set, falling back to 1 default profile: "default"
2025-12-11T01:14:16.893Z DEBUG 34677 --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@221885c3
2025-12-11T01:14:16.941Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 7 mappings in 'requestMappingHandlerMapping'
2025-12-11T01:14:16.948Z DEBUG 34677 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-11T01:14:16.949Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-11T01:14:16.952Z DEBUG 34677 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-11T01:14:16.954Z  INFO 34677 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-11T01:14:16.954Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-11T01:14:16.954Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-12-11T01:14:16.955Z  INFO 34677 --- [           main] t.b.t.c.ReportRestControllerTest         : Started ReportRestControllerTest in 0.069 seconds (process running for 10.953)
2025-12-11T01:14:16.959Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ReportRestController#createReport(Report)
2025-12-11T01:14:16.961Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [tqs.backend.tqsbackend.entity.Report@3b945f99]
2025-12-11T01:14:16.962Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:16.962Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-11T01:14:16.964Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ReportRestController#getReportsByState(ReportState)
2025-12-11T01:14:16.966Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:16.966Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Writing [[tqs.backend.tqsbackend.entity.Report@6191333d]]
2025-12-11T01:14:16.968Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ReportRestController#getReportById(Long)
2025-12-11T01:14:16.969Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:16.969Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [tqs.backend.tqsbackend.entity.Report@26fb5030]
2025-12-11T01:14:16.971Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ReportRestController#getReportsBySender(Long)
2025-12-11T01:14:16.972Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:16.972Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Writing [[tqs.backend.tqsbackend.entity.Report@43427670]]
2025-12-11T01:14:16.973Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ReportRestController#getReportsBySender(Long)
2025-12-11T01:14:16.975Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:16.975Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Writing [[]]
2025-12-11T01:14:16.977Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ReportRestController#updateReportState(Long)
2025-12-11T01:14:16.978Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:16.978Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-11T01:14:16.979Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ReportRestController#updateReportState(Long)
2025-12-11T01:14:16.979Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:16.980Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-11T01:14:16.981Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ReportRestController#createReport(Report)
2025-12-11T01:14:16.982Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [tqs.backend.tqsbackend.entity.Report@50fd8388]
2025-12-11T01:14:16.982Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:16.982Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-11T01:14:16.984Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ReportRestController#getReportById(Long)
2025-12-11T01:14:16.984Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:16.984Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-11T01:14:16.985Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ReportRestController#createReport(Report)
2025-12-11T01:14:16.986Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [tqs.backend.tqsbackend.entity.Report@50b5548f]
2025-12-11T01:14:16.986Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:16.986Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [tqs.backend.tqsbackend.entity.Report@5a085aec]
2025-12-11T01:14:16.988Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ReportRestController#getReportsByState(ReportState)
2025-12-11T01:14:16.988Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:16.989Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Writing [[]]
[INFO] Tests run: 11, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.107 s -- in tqs.backend.tqsbackend.controller.ReportRestControllerTest
[INFO] Running tqs.backend.tqsbackend.controller.BookingRestControllerTest
2025-12-11T01:14:16.993Z  INFO 34677 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration tqs.backend.tqsbackend.TqsbackendApplication for test class tqs.backend.tqsbackend.controller.BookingRestControllerTest
2025-12-11T01:14:16.994Z  INFO 34677 --- [           main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.7)

2025-12-11T01:14:17.000Z  INFO 34677 --- [           main] t.b.t.c.BookingRestControllerTest        : Starting BookingRestControllerTest using Java 21.0.2 with PID 34677 (started by joaobarreira in /Users/joaobarreira/Desktop/3ano1semestre/TQS/PartyShare/tqsbackend)
2025-12-11T01:14:17.000Z DEBUG 34677 --- [           main] t.b.t.c.BookingRestControllerTest        : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-12-11T01:14:17.000Z  INFO 34677 --- [           main] t.b.t.c.BookingRestControllerTest        : No active profile set, falling back to 1 default profile: "default"
2025-12-11T01:14:17.001Z DEBUG 34677 --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@40f535c4
2025-12-11T01:14:17.068Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 6 mappings in 'requestMappingHandlerMapping'
2025-12-11T01:14:17.077Z DEBUG 34677 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-11T01:14:17.078Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-11T01:14:17.081Z DEBUG 34677 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-11T01:14:17.083Z  INFO 34677 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-11T01:14:17.083Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-11T01:14:17.083Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-12-11T01:14:17.086Z  INFO 34677 --- [           main] t.b.t.c.BookingRestControllerTest        : Started BookingRestControllerTest in 0.091 seconds (process running for 11.083)
2025-12-11T01:14:17.088Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.BookingRestController#getBooking(Long)
2025-12-11T01:14:17.091Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:17.091Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-11T01:14:17.094Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.BookingRestController#createBooking(BookingCreateRequest)
2025-12-11T01:14:17.099Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [tqs.backend.tqsbackend.dto.BookingCreateRequest@415441ac]
2025-12-11T01:14:17.106Z DEBUG 34677 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler tqs.backend.tqsbackend.controller.GlobalExceptionHandler#handlePayment(PaymentException)
2025-12-11T01:14:17.106Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2025-12-11T01:14:17.106Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["declined"]
2025-12-11T01:14:17.107Z DEBUG 34677 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [tqs.backend.tqsbackend.exception.PaymentException: declined]
2025-12-11T01:14:17.112Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.BookingRestController#createBooking(BookingCreateRequest)
2025-12-11T01:14:17.113Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [tqs.backend.tqsbackend.dto.BookingCreateRequest@21614fab]
2025-12-11T01:14:17.113Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:17.113Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [tqs.backend.tqsbackend.dto.BookingResponse@12514cab]
2025-12-11T01:14:17.119Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.BookingRestController#getBooking(Long)
2025-12-11T01:14:17.119Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:17.119Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [tqs.backend.tqsbackend.dto.BookingResponse@17493bf7]
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.131 s -- in tqs.backend.tqsbackend.controller.BookingRestControllerTest
[INFO] Running tqs.backend.tqsbackend.controller.HomeControllerIntegrationTest
2025-12-11T01:14:17.131Z  INFO 34677 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [tqs.backend.tqsbackend.controller.HomeControllerIntegrationTest]: HomeControllerIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-11T01:14:17.135Z  INFO 34677 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration tqs.backend.tqsbackend.TqsbackendApplication for test class tqs.backend.tqsbackend.controller.HomeControllerIntegrationTest
2025-12-11T01:14:17.140Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.HomeController#home()
2025-12-11T01:14:17.141Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.016 s -- in tqs.backend.tqsbackend.controller.HomeControllerIntegrationTest
[INFO] Running tqs.backend.tqsbackend.controller.MessageControllerTest
2025-12-11T01:14:17.145Z  INFO 34677 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [tqs.backend.tqsbackend.controller.MessageControllerTest]: MessageControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-11T01:14:17.149Z  INFO 34677 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration tqs.backend.tqsbackend.TqsbackendApplication for test class tqs.backend.tqsbackend.controller.MessageControllerTest
2025-12-11T01:14:17.150Z  INFO 34677 --- [           main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.7)

2025-12-11T01:14:17.157Z  INFO 34677 --- [           main] t.b.t.controller.MessageControllerTest   : Starting MessageControllerTest using Java 21.0.2 with PID 34677 (started by joaobarreira in /Users/joaobarreira/Desktop/3ano1semestre/TQS/PartyShare/tqsbackend)
2025-12-11T01:14:17.158Z DEBUG 34677 --- [           main] t.b.t.controller.MessageControllerTest   : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-12-11T01:14:17.158Z  INFO 34677 --- [           main] t.b.t.controller.MessageControllerTest   : No active profile set, falling back to 1 default profile: "default"
2025-12-11T01:14:17.158Z DEBUG 34677 --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@4f2fbcd9
2025-12-11T01:14:17.213Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 5 mappings in 'requestMappingHandlerMapping'
2025-12-11T01:14:17.221Z DEBUG 34677 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-11T01:14:17.222Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-11T01:14:17.224Z DEBUG 34677 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-11T01:14:17.226Z  INFO 34677 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-11T01:14:17.226Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-11T01:14:17.227Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-12-11T01:14:17.228Z  INFO 34677 --- [           main] t.b.t.controller.MessageControllerTest   : Started MessageControllerTest in 0.078 seconds (process running for 11.226)
2025-12-11T01:14:17.230Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.MessageController#listMessages(Model, HttpSession)
2025-12-11T01:14:17.230Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:17.232Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.MessageController#showNewMessageForm(Long, Long, Model, HttpSession)
2025-12-11T01:14:17.233Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:17.234Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.MessageController#listMessages(Model, HttpSession)
2025-12-11T01:14:17.235Z DEBUG 34677 --- [           main] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [*/*]
2025-12-11T01:14:17.260Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.MessageController#showNewMessageForm(Long, Long, Model, HttpSession)
2025-12-11T01:14:17.260Z DEBUG 34677 --- [           main] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [*/*]
2025-12-11T01:14:17.263Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.MessageController#sendMessage(Long, String, Long, HttpSession, RedirectAttributes)
2025-12-11T01:14:17.264Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:17.266Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.MessageController#sendMessage(Long, String, Long, HttpSession, RedirectAttributes)
2025-12-11T01:14:17.266Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:17.268Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.MessageController#showNewMessageForm(Long, Long, Model, HttpSession)
2025-12-11T01:14:17.268Z DEBUG 34677 --- [           main] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [*/*]
2025-12-11T01:14:17.270Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.MessageController#sendMessage(Long, String, Long, HttpSession, RedirectAttributes)
2025-12-11T01:14:17.270Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
[INFO] Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.126 s -- in tqs.backend.tqsbackend.controller.MessageControllerTest
[INFO] Running tqs.backend.tqsbackend.controller.BookingControllerTest
2025-12-11T01:14:17.272Z  INFO 34677 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [tqs.backend.tqsbackend.controller.BookingControllerTest]: BookingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-11T01:14:17.274Z  INFO 34677 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration tqs.backend.tqsbackend.TqsbackendApplication for test class tqs.backend.tqsbackend.controller.BookingControllerTest
2025-12-11T01:14:17.275Z  INFO 34677 --- [           main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.7)

2025-12-11T01:14:17.281Z  INFO 34677 --- [           main] t.b.t.controller.BookingControllerTest   : Starting BookingControllerTest using Java 21.0.2 with PID 34677 (started by joaobarreira in /Users/joaobarreira/Desktop/3ano1semestre/TQS/PartyShare/tqsbackend)
2025-12-11T01:14:17.281Z DEBUG 34677 --- [           main] t.b.t.controller.BookingControllerTest   : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-12-11T01:14:17.281Z  INFO 34677 --- [           main] t.b.t.controller.BookingControllerTest   : No active profile set, falling back to 1 default profile: "default"
2025-12-11T01:14:17.282Z DEBUG 34677 --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@46011225
2025-12-11T01:14:17.326Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 12 mappings in 'requestMappingHandlerMapping'
2025-12-11T01:14:17.333Z DEBUG 34677 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-11T01:14:17.335Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-11T01:14:17.337Z DEBUG 34677 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-11T01:14:17.339Z  INFO 34677 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-11T01:14:17.339Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-11T01:14:17.339Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-12-11T01:14:17.340Z  INFO 34677 --- [           main] t.b.t.controller.BookingControllerTest   : Started BookingControllerTest in 0.065 seconds (process running for 11.338)
2025-12-11T01:14:17.343Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.BookingController#declineBooking(Long, HttpSession)
2025-12-11T01:14:17.343Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:17.346Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.BookingController#counterOfferBooking(Long, Double, HttpSession)
2025-12-11T01:14:17.346Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:17.348Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.BookingController#getBookingRequests(Model, HttpSession)
2025-12-11T01:14:17.349Z DEBUG 34677 --- [           main] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [*/*]
2025-12-11T01:14:17.368Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.BookingController#getBookingRequests(Model, HttpSession)
2025-12-11T01:14:17.369Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:17.370Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.BookingController#createBooking(BookingCreateRequest, BindingResult, RedirectAttributes, HttpSession)
2025-12-11T01:14:17.375Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:17.377Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.BookingController#acceptCounterOffer(Long, HttpSession)
2025-12-11T01:14:17.377Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:17.379Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.BookingController#declineCounterOffer(Long, HttpSession)
2025-12-11T01:14:17.379Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:17.380Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.BookingController#acceptBooking(Long, HttpSession)
2025-12-11T01:14:17.380Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
[INFO] Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.110 s -- in tqs.backend.tqsbackend.controller.BookingControllerTest
[INFO] Running tqs.backend.tqsbackend.controller.ItemControllerTest
2025-12-11T01:14:17.383Z  INFO 34677 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [tqs.backend.tqsbackend.controller.ItemControllerTest]: ItemControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-11T01:14:17.385Z  INFO 34677 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration tqs.backend.tqsbackend.TqsbackendApplication for test class tqs.backend.tqsbackend.controller.ItemControllerTest
2025-12-11T01:14:17.386Z  INFO 34677 --- [           main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.7)

2025-12-11T01:14:17.390Z  INFO 34677 --- [           main] t.b.t.controller.ItemControllerTest      : Starting ItemControllerTest using Java 21.0.2 with PID 34677 (started by joaobarreira in /Users/joaobarreira/Desktop/3ano1semestre/TQS/PartyShare/tqsbackend)
2025-12-11T01:14:17.390Z DEBUG 34677 --- [           main] t.b.t.controller.ItemControllerTest      : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-12-11T01:14:17.390Z  INFO 34677 --- [           main] t.b.t.controller.ItemControllerTest      : No active profile set, falling back to 1 default profile: "default"
2025-12-11T01:14:17.391Z DEBUG 34677 --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@182781c3
2025-12-11T01:14:17.475Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 10 mappings in 'requestMappingHandlerMapping'
2025-12-11T01:14:17.482Z DEBUG 34677 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-11T01:14:17.483Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-11T01:14:17.485Z DEBUG 34677 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-11T01:14:17.487Z  INFO 34677 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-11T01:14:17.487Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-11T01:14:17.487Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-12-11T01:14:17.489Z  INFO 34677 --- [           main] t.b.t.controller.ItemControllerTest      : Started ItemControllerTest in 0.104 seconds (process running for 11.487)
2025-12-11T01:14:17.492Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ItemController#showEditItemForm(Long, Model, HttpSession)
2025-12-11T01:14:17.493Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:17.496Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ItemController#searchItems(String, String, Double, Double, Double, String, Model, HttpSession)
2025-12-11T01:14:17.497Z DEBUG 34677 --- [           main] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [*/*]
2025-12-11T01:14:17.519Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ItemController#toggleItemStatus(Long, boolean, HttpSession)
2025-12-11T01:14:17.520Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:17.521Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ItemController#searchItems(String, String, Double, Double, Double, String, Model, HttpSession)
2025-12-11T01:14:17.522Z DEBUG 34677 --- [           main] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [*/*]
2025-12-11T01:14:17.524Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ItemController#updateItem(Long, Item, Long, HttpSession)
2025-12-11T01:14:17.526Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:17.528Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ItemController#getItemDetails(Long, Model, HttpSession)
2025-12-11T01:14:17.528Z DEBUG 34677 --- [           main] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [*/*]
2025-12-11T01:14:17.534Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ItemController#toggleItemStatus(Long, boolean, HttpSession)
2025-12-11T01:14:17.535Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:17.536Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ItemController#getMyItems(Model, HttpSession)
2025-12-11T01:14:17.536Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:17.538Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ItemController#showNewItemForm(Model, HttpSession)
2025-12-11T01:14:17.538Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:17.539Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ItemController#showNewItemForm(Model, HttpSession)
2025-12-11T01:14:17.539Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:17.540Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ItemController#getMyItems(Model, HttpSession)
2025-12-11T01:14:17.541Z DEBUG 34677 --- [           main] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [*/*]
2025-12-11T01:14:17.545Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ItemController#getItemDetails(Long, Model, HttpSession)
2025-12-11T01:14:17.545Z DEBUG 34677 --- [           main] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [*/*]
2025-12-11T01:14:17.548Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ItemController#createItem(Item, Long, HttpSession)
2025-12-11T01:14:17.549Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:17.550Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ItemController#getMyItems(Model, HttpSession)
2025-12-11T01:14:17.550Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:17.552Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ItemController#showNewItemForm(Model, HttpSession)
2025-12-11T01:14:17.552Z DEBUG 34677 --- [           main] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [*/*]
2025-12-11T01:14:17.555Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ItemController#toggleItemStatus(Long, boolean, HttpSession)
2025-12-11T01:14:17.555Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:17.557Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ItemController#showEditItemForm(Long, Model, HttpSession)
2025-12-11T01:14:17.557Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:17.558Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ItemController#createItem(Item, Long, HttpSession)
2025-12-11T01:14:17.559Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:17.560Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ItemController#showEditItemForm(Long, Model, HttpSession)
2025-12-11T01:14:17.560Z DEBUG 34677 --- [           main] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [*/*]
2025-12-11T01:14:17.565Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ItemController#createItem(Item, Long, HttpSession)
2025-12-11T01:14:17.565Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:17.566Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ItemController#showEditItemForm(Long, Model, HttpSession)
2025-12-11T01:14:17.566Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:17.568Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ItemController#updateItem(Long, Item, Long, HttpSession)
2025-12-11T01:14:17.568Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
[INFO] Tests run: 22, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.187 s -- in tqs.backend.tqsbackend.controller.ItemControllerTest
[INFO] Running tqs.backend.tqsbackend.controller.BookingRestControllerIntegrationTest
2025-12-11T01:14:17.570Z  INFO 34677 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [tqs.backend.tqsbackend.controller.BookingRestControllerIntegrationTest]: BookingRestControllerIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-11T01:14:17.571Z  INFO 34677 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration tqs.backend.tqsbackend.TqsbackendApplication for test class tqs.backend.tqsbackend.controller.BookingRestControllerIntegrationTest
2025-12-11T01:14:17.572Z  INFO 34677 --- [           main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.7)

2025-12-11T01:14:17.583Z  INFO 34677 --- [           main] t.c.BookingRestControllerIntegrationTest : Starting BookingRestControllerIntegrationTest using Java 21.0.2 with PID 34677 (started by joaobarreira in /Users/joaobarreira/Desktop/3ano1semestre/TQS/PartyShare/tqsbackend)
2025-12-11T01:14:17.583Z DEBUG 34677 --- [           main] t.c.BookingRestControllerIntegrationTest : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-12-11T01:14:17.583Z  INFO 34677 --- [           main] t.c.BookingRestControllerIntegrationTest : No active profile set, falling back to 1 default profile: "default"
2025-12-11T01:14:17.583Z DEBUG 34677 --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@69cde935
2025-12-11T01:14:17.716Z  INFO 34677 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-11T01:14:17.723Z  INFO 34677 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 5 ms. Found 8 JPA repository interfaces.
2025-12-11T01:14:17.797Z  INFO 34677 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-11T01:14:17.798Z  INFO 34677 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-11T01:14:17.803Z  INFO 34677 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-11T01:14:17.804Z  INFO 34677 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Starting...
2025-12-11T01:14:17.805Z  INFO 34677 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-4 - Added connection conn41: url=jdbc:h2:mem:testdb user=SA
2025-12-11T01:14:17.805Z  INFO 34677 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Start completed.
2025-12-11T01:14:17.805Z  WARN 34677 --- [           main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-11T01:14:17.805Z  INFO 34677 --- [           main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-4)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-11T01:14:17.839Z  INFO 34677 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-11T01:14:17.847Z  INFO 34677 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
Mock data initialized: 3 owners and 5 items created!
2025-12-11T01:14:18.134Z  WARN 34677 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-11T01:14:18.147Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 72 mappings in 'requestMappingHandlerMapping'
2025-12-11T01:14:18.158Z DEBUG 34677 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-11T01:14:18.160Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-11T01:14:18.163Z DEBUG 34677 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-11T01:14:18.184Z DEBUG 34677 --- [           main] o.s.w.f.ServerHttpObservationFilter      : Filter 'webMvcObservationFilter' configured for use
2025-12-11T01:14:18.184Z  INFO 34677 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-11T01:14:18.184Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-11T01:14:18.185Z  INFO 34677 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint beneath base path '/actuator'
2025-12-11T01:14:18.187Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 3 ms
2025-12-11T01:14:18.194Z  INFO 34677 --- [           main] t.c.BookingRestControllerIntegrationTest : Started BookingRestControllerIntegrationTest in 0.622 seconds (process running for 12.192)
2025-12-11T01:14:18.202Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.BookingRestController#createBooking(BookingCreateRequest)
2025-12-11T01:14:18.204Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [tqs.backend.tqsbackend.dto.BookingCreateRequest@7741af29]
2025-12-11T01:14:18.214Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:18.214Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [tqs.backend.tqsbackend.dto.BookingResponse@34741d2b]
2025-12-11T01:14:18.223Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.BookingRestController#createBooking(BookingCreateRequest)
2025-12-11T01:14:18.223Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [tqs.backend.tqsbackend.dto.BookingCreateRequest@320c0e0b]
2025-12-11T01:14:18.225Z DEBUG 34677 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler tqs.backend.tqsbackend.controller.GlobalExceptionHandler#handleAvailability(AvailabilityException)
2025-12-11T01:14:18.225Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2025-12-11T01:14:18.225Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["Item not available for the selected dates"]
2025-12-11T01:14:18.225Z DEBUG 34677 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [tqs.backend.tqsbackend.exception.AvailabilityException: Item not available for the selected dates]
2025-12-11T01:14:18.230Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.BookingRestController#createBooking(BookingCreateRequest)
2025-12-11T01:14:18.230Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [tqs.backend.tqsbackend.dto.BookingCreateRequest@d2969b9]
2025-12-11T01:14:18.238Z DEBUG 34677 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler tqs.backend.tqsbackend.controller.GlobalExceptionHandler#handleBeanValidation(MethodArgumentNotValidException)
2025-12-11T01:14:18.238Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2025-12-11T01:14:18.238Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["must be a date in the present or in the future"]
2025-12-11T01:14:18.238Z DEBUG 34677 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<tqs.backend.tqsbackend.dto.BookingResponse> tqs.backend.tqsbackend.controller.BookingRestController.createBooking(tqs.backend.tqsbackend.dto.BookingCreateRequest): [Field error in object 'bookingCreateRequest' on field 'startDate': rejected value [2025-12-10]; codes [FutureOrPresent.bookingCreateRequest.startDate,FutureOrPresent.startDate,FutureOrPresent.java.time.LocalDate,FutureOrPresent]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [bookingCreateRequest.startDate,startDate]; arguments []; default message [startDate]]; default message [must be a date in the present or in the future]] ]
2025-12-11T01:14:18.244Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.BookingRestController#createBooking(BookingCreateRequest)
2025-12-11T01:14:18.244Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [tqs.backend.tqsbackend.dto.BookingCreateRequest@3ad875a6]
2025-12-11T01:14:18.247Z DEBUG 34677 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler tqs.backend.tqsbackend.controller.GlobalExceptionHandler#handlePayment(PaymentException)
2025-12-11T01:14:18.247Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2025-12-11T01:14:18.247Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["gateway-error"]
2025-12-11T01:14:18.247Z DEBUG 34677 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [tqs.backend.tqsbackend.exception.PaymentException: gateway-error]
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.686 s -- in tqs.backend.tqsbackend.controller.BookingRestControllerIntegrationTest
[INFO] Running tqs.backend.tqsbackend.controller.BookingControllerIntegrationTest
2025-12-11T01:14:18.258Z  INFO 34677 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration tqs.backend.tqsbackend.TqsbackendApplication for test class tqs.backend.tqsbackend.controller.BookingControllerIntegrationTest
2025-12-11T01:14:18.259Z  INFO 34677 --- [           main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.7)

2025-12-11T01:14:18.265Z  INFO 34677 --- [           main] t.b.t.c.BookingControllerIntegrationTest : Starting BookingControllerIntegrationTest using Java 21.0.2 with PID 34677 (started by joaobarreira in /Users/joaobarreira/Desktop/3ano1semestre/TQS/PartyShare/tqsbackend)
2025-12-11T01:14:18.265Z DEBUG 34677 --- [           main] t.b.t.c.BookingControllerIntegrationTest : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-12-11T01:14:18.265Z  INFO 34677 --- [           main] t.b.t.c.BookingControllerIntegrationTest : The following 1 profile is active: "dev"
2025-12-11T01:14:18.265Z DEBUG 34677 --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@4998e0c
2025-12-11T01:14:18.357Z  INFO 34677 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-11T01:14:18.363Z  INFO 34677 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 5 ms. Found 8 JPA repository interfaces.
2025-12-11T01:14:18.391Z  INFO 34677 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-11T01:14:18.393Z  INFO 34677 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-11T01:14:18.397Z  INFO 34677 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-11T01:14:18.397Z  INFO 34677 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Starting...
2025-12-11T01:14:18.398Z  INFO 34677 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-5 - Added connection conn51: url=jdbc:h2:mem:testdb user=SA
2025-12-11T01:14:18.398Z  INFO 34677 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Start completed.
2025-12-11T01:14:18.398Z  WARN 34677 --- [           main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-11T01:14:18.398Z  INFO 34677 --- [           main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-5)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-11T01:14:18.428Z  INFO 34677 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
Hibernate: 
    drop table if exists bookings cascade 
Hibernate: 
    drop table if exists categories cascade 
Hibernate: 
    drop table if exists favorites cascade 
Hibernate: 
    drop table if exists items cascade 
Hibernate: 
    drop table if exists messages cascade 
Hibernate: 
    drop table if exists ratings cascade 
Hibernate: 
    drop table if exists reports cascade 
Hibernate: 
    drop table if exists users cascade 
Hibernate: 
    create table bookings (
        daily_price numeric(12,2) not null,
        end_date date not null,
        start_date date not null,
        total_price numeric(14,2) not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        item_id bigint not null,
        renter_id bigint not null,
        updated_at timestamp(6),
        payment_reference varchar(255),
        payment_status enum ('FAILED','PAID','PENDING') not null,
        status enum ('ACCEPTED','CANCELLED','COUNTER_OFFER','REJECTED','REQUESTED') not null,
        primary key (id)
    )
Hibernate: 
    create table categories (
        id bigint generated by default as identity,
        name varchar(255) not null unique,
        primary key (id)
    )
Hibernate: 
    create table favorites (
        id bigint generated by default as identity,
        item_id bigint not null,
        user_id bigint not null,
        primary key (id)
    )
Hibernate: 
    create table items (
        average_rating float(53),
        is_active boolean not null,
        price float(53) not null,
        category_id bigint not null,
        id bigint generated by default as identity,
        owner_id bigint,
        description varchar(1000),
        image_url varchar(255),
        location varchar(255),
        name varchar(255) not null,
        primary key (id)
    )
Hibernate: 
    create table messages (
        is_read boolean not null,
        id bigint generated by default as identity,
        item_id bigint,
        receiver_id bigint not null,
        sender_id bigint not null,
        sent_at timestamp(6) not null,
        content varchar(2000) not null,
        primary key (id)
    )
Hibernate: 
    create table ratings (
        rate integer not null,
        id bigint generated by default as identity,
        rated_id bigint not null,
        sender_id bigint not null,
        comment varchar(512),
        rating_type enum ('OWNER','PRODUCT') not null,
        primary key (id)
    )
Hibernate: 
    create table reports (
        id bigint generated by default as identity,
        sender_id bigint not null,
        title varchar(128) not null,
        description varchar(4096) not null,
        state enum ('CLOSED','IN_PROGRESS','NEW') not null,
        primary key (id)
    )
Hibernate: 
    create table users (
        is_active boolean not null,
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        name varchar(255) not null,
        password_hash varchar(255) not null,
        role enum ('ADMIN','OWNER','RENTER') not null,
        primary key (id)
    )
Hibernate: 
    alter table if exists bookings 
       add constraint FKbtv44e8p4a4pq8hfuakjbtfpc 
       foreign key (item_id) 
       references items
Hibernate: 
    alter table if exists favorites 
       add constraint FKqknl7abn519k6qg1cquvnca4i 
       foreign key (item_id) 
       references items
Hibernate: 
    alter table if exists items 
       add constraint FKjcdcde7htb3tyjgouo4g9xbmr 
       foreign key (category_id) 
       references categories
2025-12-11T01:14:18.435Z  INFO 34677 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
Hibernate: 
    select
        count(*) 
    from
        users u1_0
Hibernate: 
    select
        count(*) 
    from
        items i1_0
Hibernate: 
    insert 
    into
        users
        (email, is_active, name, password_hash, role, id) 
    values
        (?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        users
        (email, is_active, name, password_hash, role, id) 
    values
        (?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        users
        (email, is_active, name, password_hash, role, id) 
    values
        (?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        categories
        (name, id) 
    values
        (?, default)
Hibernate: 
    insert 
    into
        categories
        (name, id) 
    values
        (?, default)
Hibernate: 
    insert 
    into
        categories
        (name, id) 
    values
        (?, default)
Hibernate: 
    insert 
    into
        items
        (average_rating, category_id, description, image_url, is_active, location, name, owner_id, price, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        items
        (average_rating, category_id, description, image_url, is_active, location, name, owner_id, price, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        items
        (average_rating, category_id, description, image_url, is_active, location, name, owner_id, price, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        items
        (average_rating, category_id, description, image_url, is_active, location, name, owner_id, price, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        items
        (average_rating, category_id, description, image_url, is_active, location, name, owner_id, price, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, default)
Mock data initialized: 3 owners and 5 items created!
2025-12-11T01:14:18.711Z  WARN 34677 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-11T01:14:18.724Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 72 mappings in 'requestMappingHandlerMapping'
2025-12-11T01:14:18.734Z DEBUG 34677 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-11T01:14:18.736Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-11T01:14:18.739Z DEBUG 34677 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-11T01:14:18.768Z  INFO 34677 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-12-11T01:14:18.771Z DEBUG 34677 --- [           main] o.s.w.f.ServerHttpObservationFilter      : Filter 'webMvcObservationFilter' configured for use
2025-12-11T01:14:18.771Z  INFO 34677 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-11T01:14:18.771Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-11T01:14:18.772Z  INFO 34677 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 13 endpoints beneath base path '/actuator'
2025-12-11T01:14:18.775Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 4 ms
2025-12-11T01:14:18.782Z  INFO 34677 --- [           main] t.b.t.c.BookingControllerIntegrationTest : Started BookingControllerIntegrationTest in 0.523 seconds (process running for 12.78)
Hibernate: 
    select
        i1_0.id,
        i1_0.average_rating,
        i1_0.category_id,
        i1_0.description,
        i1_0.image_url,
        i1_0.is_active,
        i1_0.location,
        i1_0.name,
        i1_0.owner_id,
        i1_0.price 
    from
        items i1_0
Hibernate: 
    select
        c1_0.id,
        c1_0.name 
    from
        categories c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.name 
    from
        categories c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.name 
    from
        categories c1_0 
    where
        c1_0.id=?
2025-12-11T01:14:18.788Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.BookingController#createBooking(BookingCreateRequest, BindingResult, RedirectAttributes, HttpSession)
2025-12-11T01:14:18.794Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
Hibernate: 
    select
        i1_0.id,
        i1_0.average_rating,
        i1_0.category_id,
        i1_0.description,
        i1_0.image_url,
        i1_0.is_active,
        i1_0.location,
        i1_0.name,
        i1_0.owner_id,
        i1_0.price 
    from
        items i1_0
Hibernate: 
    select
        c1_0.id,
        c1_0.name 
    from
        categories c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.name 
    from
        categories c1_0 
    where
        c1_0.id=?
Hibernate: 
    select
        c1_0.id,
        c1_0.name 
    from
        categories c1_0 
    where
        c1_0.id=?
2025-12-11T01:14:18.800Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.BookingController#showRentForm(Long, Model, HttpSession)
2025-12-11T01:14:18.801Z DEBUG 34677 --- [           main] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [*/*]
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.574 s -- in tqs.backend.tqsbackend.controller.BookingControllerIntegrationTest
[INFO] Running tqs.backend.tqsbackend.controller.UserRestControllerTest
2025-12-11T01:14:18.832Z  INFO 34677 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [tqs.backend.tqsbackend.controller.UserRestControllerTest]: UserRestControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-11T01:14:18.833Z  INFO 34677 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration tqs.backend.tqsbackend.TqsbackendApplication for test class tqs.backend.tqsbackend.controller.UserRestControllerTest
2025-12-11T01:14:18.834Z  INFO 34677 --- [           main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.7)

2025-12-11T01:14:18.840Z  INFO 34677 --- [           main] t.b.t.controller.UserRestControllerTest  : Starting UserRestControllerTest using Java 21.0.2 with PID 34677 (started by joaobarreira in /Users/joaobarreira/Desktop/3ano1semestre/TQS/PartyShare/tqsbackend)
2025-12-11T01:14:18.840Z DEBUG 34677 --- [           main] t.b.t.controller.UserRestControllerTest  : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-12-11T01:14:18.840Z  INFO 34677 --- [           main] t.b.t.controller.UserRestControllerTest  : No active profile set, falling back to 1 default profile: "default"
2025-12-11T01:14:18.840Z DEBUG 34677 --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@590131b4
2025-12-11T01:14:18.890Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 7 mappings in 'requestMappingHandlerMapping'
2025-12-11T01:14:18.897Z DEBUG 34677 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-11T01:14:18.898Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-11T01:14:18.900Z DEBUG 34677 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-11T01:14:18.902Z  INFO 34677 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-11T01:14:18.902Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-11T01:14:18.902Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-12-11T01:14:18.904Z  INFO 34677 --- [           main] t.b.t.controller.UserRestControllerTest  : Started UserRestControllerTest in 0.07 seconds (process running for 12.901)
2025-12-11T01:14:18.906Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.UserRestController#getUserByEmail(String)
2025-12-11T01:14:18.908Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:18.908Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [tqs.backend.tqsbackend.dto.UserDto@e4ee5ac1]
2025-12-11T01:14:18.916Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.UserRestController#getUserById(Long)
2025-12-11T01:14:18.916Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:18.916Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [tqs.backend.tqsbackend.dto.UserDto@e4ee5ac1]
2025-12-11T01:14:18.918Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.UserRestController#searchUsers(String, UserRoles, Boolean)
2025-12-11T01:14:18.918Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:18.918Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Writing [[tqs.backend.tqsbackend.dto.UserDto@e4ee5ac1, tqs.backend.tqsbackend.dto.UserDto@d7579cbb]]
2025-12-11T01:14:18.920Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.UserRestController#searchUsers(String, UserRoles, Boolean)
2025-12-11T01:14:18.920Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:18.920Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Writing [[tqs.backend.tqsbackend.dto.UserDto@e4ee5ac1]]
2025-12-11T01:14:18.921Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.UserRestController#getUserByEmail(String)
2025-12-11T01:14:18.922Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:18.922Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-11T01:14:18.923Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.UserRestController#searchUsers(String, UserRoles, Boolean)
2025-12-11T01:14:18.923Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:18.923Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Writing [[tqs.backend.tqsbackend.dto.UserDto@e4ee5ac1]]
2025-12-11T01:14:18.925Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.UserRestController#getUserById(Long)
2025-12-11T01:14:18.925Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:18.925Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-11T01:14:18.927Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.UserRestController#register(UserRegistrationDto)
2025-12-11T01:14:18.928Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [tqs.backend.tqsbackend.dto.UserRegistrationDto@9970341]
2025-12-11T01:14:18.928Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2025-12-11T01:14:18.928Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["Invalid Email"]
2025-12-11T01:14:18.931Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.UserRestController#register(UserRegistrationDto)
2025-12-11T01:14:18.931Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [tqs.backend.tqsbackend.dto.UserRegistrationDto@3b944c1d]
2025-12-11T01:14:18.932Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:18.932Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [tqs.backend.tqsbackend.dto.UserDto@329c1de3]
2025-12-11T01:14:18.933Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.UserRestController#searchUsers(String, UserRoles, Boolean)
2025-12-11T01:14:18.933Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:18.933Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Writing [[tqs.backend.tqsbackend.dto.UserDto@e4ee5ac1]]
2025-12-11T01:14:18.935Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.UserRestController#login(UserLoginRequest)
2025-12-11T01:14:18.935Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [tqs.backend.tqsbackend.dto.UserLoginRequest@707ee53a]
2025-12-11T01:14:18.935Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2025-12-11T01:14:18.935Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["Login successful"]
2025-12-11T01:14:18.936Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.UserRestController#searchUsers(String, UserRoles, Boolean)
2025-12-11T01:14:18.937Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:18.937Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Writing [[tqs.backend.tqsbackend.dto.UserDto@e4ee5ac1]]
2025-12-11T01:14:18.938Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.UserRestController#searchUsers(String, UserRoles, Boolean)
2025-12-11T01:14:18.938Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:18.938Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Writing [[tqs.backend.tqsbackend.dto.UserDto@e4ee5ac1]]
2025-12-11T01:14:18.939Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.UserRestController#login(UserLoginRequest)
2025-12-11T01:14:18.939Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [tqs.backend.tqsbackend.dto.UserLoginRequest@df5df85]
2025-12-11T01:14:18.940Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2025-12-11T01:14:18.940Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["Invalid credentials"]
2025-12-11T01:14:18.941Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.UserRestController#searchUsers(String, UserRoles, Boolean)
2025-12-11T01:14:18.941Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:18.941Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Writing [[tqs.backend.tqsbackend.dto.UserDto@e4ee5ac1]]
2025-12-11T01:14:18.942Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.UserRestController#searchUsers(String, UserRoles, Boolean)
2025-12-11T01:14:18.942Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:18.942Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Writing [[tqs.backend.tqsbackend.dto.UserDto@d7579cbb]]
[INFO] Tests run: 16, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.112 s -- in tqs.backend.tqsbackend.controller.UserRestControllerTest
[INFO] Running tqs.backend.tqsbackend.controller.ItemControllerIntegrationTest
2025-12-11T01:14:18.944Z  INFO 34677 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [tqs.backend.tqsbackend.controller.ItemControllerIntegrationTest]: ItemControllerIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-11T01:14:18.945Z  INFO 34677 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration tqs.backend.tqsbackend.TqsbackendApplication for test class tqs.backend.tqsbackend.controller.ItemControllerIntegrationTest
2025-12-11T01:14:18.947Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ItemController#searchItems(String, String, Double, Double, Double, String, Model, HttpSession)
2025-12-11T01:14:18.965Z DEBUG 34677 --- [           main] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [*/*]
2025-12-11T01:14:18.991Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ItemController#searchItems(String, String, Double, Double, Double, String, Model, HttpSession)
2025-12-11T01:14:18.995Z DEBUG 34677 --- [           main] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [*/*]
2025-12-11T01:14:19.001Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ItemController#searchItems(String, String, Double, Double, Double, String, Model, HttpSession)
2025-12-11T01:14:19.004Z DEBUG 34677 --- [           main] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [*/*]
2025-12-11T01:14:19.011Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ItemController#searchItems(String, String, Double, Double, Double, String, Model, HttpSession)
2025-12-11T01:14:19.013Z DEBUG 34677 --- [           main] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [*/*]
2025-12-11T01:14:19.018Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ItemController#searchItems(String, String, Double, Double, Double, String, Model, HttpSession)
2025-12-11T01:14:19.024Z DEBUG 34677 --- [           main] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [*/*]
2025-12-11T01:14:19.028Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ItemController#getItemDetails(Long, Model, HttpSession)
2025-12-11T01:14:19.030Z DEBUG 34677 --- [           main] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [*/*]
2025-12-11T01:14:19.035Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ItemController#searchItems(String, String, Double, Double, Double, String, Model, HttpSession)
2025-12-11T01:14:19.038Z DEBUG 34677 --- [           main] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [*/*]
2025-12-11T01:14:19.043Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ItemController#searchItems(String, String, Double, Double, Double, String, Model, HttpSession)
2025-12-11T01:14:19.046Z DEBUG 34677 --- [           main] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [*/*]
[INFO] Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.105 s -- in tqs.backend.tqsbackend.controller.ItemControllerIntegrationTest
[INFO] Running tqs.backend.tqsbackend.controller.ItemRestControllerIntegrationTest
2025-12-11T01:14:19.050Z  INFO 34677 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [tqs.backend.tqsbackend.controller.ItemRestControllerIntegrationTest]: ItemRestControllerIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-11T01:14:19.051Z  INFO 34677 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration tqs.backend.tqsbackend.TqsbackendApplication for test class tqs.backend.tqsbackend.controller.ItemRestControllerIntegrationTest
2025-12-11T01:14:19.053Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ItemRestController#searchItems(String, String, Double, Double, Double, String)
2025-12-11T01:14:19.056Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:19.056Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Writing [[tqs.backend.tqsbackend.entity.Item@6ee06279, tqs.backend.tqsbackend.entity.Item@7a25c650, tqs.backe (truncated)...]
2025-12-11T01:14:19.065Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.ItemRestController#searchItems(String, String, Double, Double, Double, String)
2025-12-11T01:14:19.067Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:19.067Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Writing [[tqs.backend.tqsbackend.entity.Item@6ee7b359]]
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.018 s -- in tqs.backend.tqsbackend.controller.ItemRestControllerIntegrationTest
[INFO] Running tqs.backend.tqsbackend.controller.RatingRestControllerTest
2025-12-11T01:14:19.069Z  INFO 34677 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [tqs.backend.tqsbackend.controller.RatingRestControllerTest]: RatingRestControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-11T01:14:19.071Z  INFO 34677 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration tqs.backend.tqsbackend.TqsbackendApplication for test class tqs.backend.tqsbackend.controller.RatingRestControllerTest
2025-12-11T01:14:19.072Z  INFO 34677 --- [           main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.7)

2025-12-11T01:14:19.077Z  INFO 34677 --- [           main] t.b.t.c.RatingRestControllerTest         : Starting RatingRestControllerTest using Java 21.0.2 with PID 34677 (started by joaobarreira in /Users/joaobarreira/Desktop/3ano1semestre/TQS/PartyShare/tqsbackend)
2025-12-11T01:14:19.077Z DEBUG 34677 --- [           main] t.b.t.c.RatingRestControllerTest         : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-12-11T01:14:19.077Z  INFO 34677 --- [           main] t.b.t.c.RatingRestControllerTest         : No active profile set, falling back to 1 default profile: "default"
2025-12-11T01:14:19.077Z DEBUG 34677 --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6529e6e3
2025-12-11T01:14:19.159Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 6 mappings in 'requestMappingHandlerMapping'
2025-12-11T01:14:19.167Z DEBUG 34677 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-11T01:14:19.168Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-11T01:14:19.169Z DEBUG 34677 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-11T01:14:19.171Z  INFO 34677 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-11T01:14:19.171Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-11T01:14:19.171Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-12-11T01:14:19.172Z  INFO 34677 --- [           main] t.b.t.c.RatingRestControllerTest         : Started RatingRestControllerTest in 0.1 seconds (process running for 13.17)
2025-12-11T01:14:19.175Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.RatingRestController#searchRatings(Long, RatingType, Long)
2025-12-11T01:14:19.177Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:19.177Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Writing [[tqs.backend.tqsbackend.entity.Rating@15d7a50f, tqs.backend.tqsbackend.entity.Rating@9e5b7e4]]
2025-12-11T01:14:19.180Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.RatingRestController#deleteRating(Long)
2025-12-11T01:14:19.181Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:19.181Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-11T01:14:19.182Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.RatingRestController#searchRatings(Long, RatingType, Long)
2025-12-11T01:14:19.182Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:19.182Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Writing [[tqs.backend.tqsbackend.entity.Rating@347b4bd4]]
2025-12-11T01:14:19.184Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.RatingRestController#deleteRating(Long)
2025-12-11T01:14:19.184Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:19.184Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-11T01:14:19.185Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.RatingRestController#getRatingById(Long)
2025-12-11T01:14:19.186Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:19.186Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [tqs.backend.tqsbackend.entity.Rating@75cde794]
2025-12-11T01:14:19.187Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.RatingRestController#getRatingById(Long)
2025-12-11T01:14:19.187Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:19.187Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Nothing to write: null body
2025-12-11T01:14:19.189Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.RatingRestController#createRating(Rating)
2025-12-11T01:14:19.190Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [tqs.backend.tqsbackend.entity.Rating@10e03829]
2025-12-11T01:14:19.190Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:19.190Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [tqs.backend.tqsbackend.entity.Rating@7045a751]
[INFO] Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.122 s -- in tqs.backend.tqsbackend.controller.RatingRestControllerTest
[INFO] Running tqs.backend.tqsbackend.controller.IT_CancelRentalRestControllerTest
2025-12-11T01:14:19.194Z  INFO 34677 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration tqs.backend.tqsbackend.TqsbackendApplication for test class tqs.backend.tqsbackend.controller.IT_CancelRentalRestControllerTest
2025-12-11T01:14:19.195Z  INFO 34677 --- [           main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.7)

2025-12-11T01:14:19.200Z  INFO 34677 --- [           main] .b.t.c.IT_CancelRentalRestControllerTest : Starting IT_CancelRentalRestControllerTest using Java 21.0.2 with PID 34677 (started by joaobarreira in /Users/joaobarreira/Desktop/3ano1semestre/TQS/PartyShare/tqsbackend)
2025-12-11T01:14:19.200Z DEBUG 34677 --- [           main] .b.t.c.IT_CancelRentalRestControllerTest : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-12-11T01:14:19.200Z  INFO 34677 --- [           main] .b.t.c.IT_CancelRentalRestControllerTest : No active profile set, falling back to 1 default profile: "default"
2025-12-11T01:14:19.201Z DEBUG 34677 --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@d2d08c1
2025-12-11T01:14:19.245Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 6 mappings in 'requestMappingHandlerMapping'
2025-12-11T01:14:19.251Z DEBUG 34677 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-11T01:14:19.252Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-11T01:14:19.254Z DEBUG 34677 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-11T01:14:19.255Z  INFO 34677 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-11T01:14:19.255Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-11T01:14:19.255Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-12-11T01:14:19.257Z  INFO 34677 --- [           main] .b.t.c.IT_CancelRentalRestControllerTest : Started IT_CancelRentalRestControllerTest in 0.063 seconds (process running for 13.254)
2025-12-11T01:14:19.258Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.BookingRestController#cancelBooking(Long, Long)
2025-12-11T01:14:19.260Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:19.260Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [tqs.backend.tqsbackend.dto.BookingResponse@223f086a]
2025-12-11T01:14:19.263Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.BookingRestController#cancelBooking(Long, Long)
2025-12-11T01:14:19.263Z DEBUG 34677 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler tqs.backend.tqsbackend.controller.GlobalExceptionHandler#handleValidation(BookingValidationException)
2025-12-11T01:14:19.264Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2025-12-11T01:14:19.264Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["Booking not found"]
2025-12-11T01:14:19.264Z DEBUG 34677 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [tqs.backend.tqsbackend.exception.BookingValidationException: Booking not found]
2025-12-11T01:14:19.265Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.BookingRestController#cancelBooking(Long, Long)
2025-12-11T01:14:19.265Z DEBUG 34677 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler tqs.backend.tqsbackend.controller.GlobalExceptionHandler#handleValidation(BookingValidationException)
2025-12-11T01:14:19.265Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2025-12-11T01:14:19.265Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["You can only cancel your own bookings"]
2025-12-11T01:14:19.265Z DEBUG 34677 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [tqs.backend.tqsbackend.exception.BookingValidationException: You can only cancel your own bookings]
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.074 s -- in tqs.backend.tqsbackend.controller.IT_CancelRentalRestControllerTest
[INFO] Running tqs.backend.tqsbackend.controller.OwnerDashboardRestControllerTest
2025-12-11T01:14:19.270Z  INFO 34677 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration tqs.backend.tqsbackend.TqsbackendApplication for test class tqs.backend.tqsbackend.controller.OwnerDashboardRestControllerTest
2025-12-11T01:14:19.271Z  INFO 34677 --- [           main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.7)

2025-12-11T01:14:19.276Z  INFO 34677 --- [           main] t.b.t.c.OwnerDashboardRestControllerTest : Starting OwnerDashboardRestControllerTest using Java 21.0.2 with PID 34677 (started by joaobarreira in /Users/joaobarreira/Desktop/3ano1semestre/TQS/PartyShare/tqsbackend)
2025-12-11T01:14:19.276Z DEBUG 34677 --- [           main] t.b.t.c.OwnerDashboardRestControllerTest : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-12-11T01:14:19.276Z  INFO 34677 --- [           main] t.b.t.c.OwnerDashboardRestControllerTest : No active profile set, falling back to 1 default profile: "default"
2025-12-11T01:14:19.277Z DEBUG 34677 --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@2465546
2025-12-11T01:14:19.322Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 7 mappings in 'requestMappingHandlerMapping'
2025-12-11T01:14:19.324Z DEBUG 34677 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-11T01:14:19.325Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-11T01:14:19.327Z DEBUG 34677 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-11T01:14:19.331Z  INFO 34677 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-11T01:14:19.331Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-11T01:14:19.331Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-12-11T01:14:19.333Z  INFO 34677 --- [           main] t.b.t.c.OwnerDashboardRestControllerTest : Started OwnerDashboardRestControllerTest in 0.062 seconds (process running for 13.33)
2025-12-11T01:14:19.335Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.OwnerDashboardRestController#getItemRatings(Long, HttpSession)
2025-12-11T01:14:19.336Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:19.336Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[tqs.backend.tqsbackend.entity.Rating@103a8a7f, tqs.backend.tqsbackend.entity.Rating@46c6f02f]]
2025-12-11T01:14:19.339Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.OwnerDashboardRestController#getOwnerItems(HttpSession)
2025-12-11T01:14:19.339Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:19.339Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=User is not an owner}]
2025-12-11T01:14:19.341Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.OwnerDashboardRestController#getItemRatings(Long, HttpSession)
2025-12-11T01:14:19.341Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:19.341Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Item not found}]
2025-12-11T01:14:19.349Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.OwnerDashboardRestController#deactivateItem(Long, HttpSession)
2025-12-11T01:14:19.349Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:19.349Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=User not logged in}]
2025-12-11T01:14:19.351Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.OwnerDashboardRestController#activateItem(Long, HttpSession)
2025-12-11T01:14:19.351Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:19.351Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=User is not an owner}]
2025-12-11T01:14:19.353Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.OwnerDashboardRestController#deactivateItem(Long, HttpSession)
2025-12-11T01:14:19.355Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:19.355Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [tqs.backend.tqsbackend.entity.Item@69fa4aaa]
2025-12-11T01:14:19.357Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.OwnerDashboardRestController#getItemRatings(Long, HttpSession)
2025-12-11T01:14:19.358Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:19.358Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=Item does not belong to this owner}]
2025-12-11T01:14:19.359Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.OwnerDashboardRestController#getOwnerItems(HttpSession)
2025-12-11T01:14:19.360Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:19.360Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [[tqs.backend.tqsbackend.entity.Item@31c240fd, tqs.backend.tqsbackend.entity.Item@75a4bffc]]
2025-12-11T01:14:19.362Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.OwnerDashboardRestController#activateItem(Long, HttpSession)
2025-12-11T01:14:19.362Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:19.362Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=User 1 is not the owner of item 2}]
2025-12-11T01:14:19.364Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.OwnerDashboardRestController#getItemRatings(Long, HttpSession)
2025-12-11T01:14:19.364Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:19.364Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=User not logged in}]
2025-12-11T01:14:19.365Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.OwnerDashboardRestController#activateItem(Long, HttpSession)
2025-12-11T01:14:19.365Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:19.365Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [tqs.backend.tqsbackend.entity.Item@4589c201]
2025-12-11T01:14:19.367Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.OwnerDashboardRestController#getItemRatings(Long, HttpSession)
2025-12-11T01:14:19.367Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:19.367Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=User is not an owner}]
2025-12-11T01:14:19.368Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.OwnerDashboardRestController#deactivateItem(Long, HttpSession)
2025-12-11T01:14:19.368Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:19.368Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=User 1 is not the owner of item 1}]
2025-12-11T01:14:19.369Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.OwnerDashboardRestController#activateItem(Long, HttpSession)
2025-12-11T01:14:19.370Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:19.370Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=User not logged in}]
2025-12-11T01:14:19.371Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.OwnerDashboardRestController#getOwnerItems(HttpSession)
2025-12-11T01:14:19.371Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:19.371Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=User not logged in}]
2025-12-11T01:14:19.372Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.OwnerDashboardRestController#deactivateItem(Long, HttpSession)
2025-12-11T01:14:19.372Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:19.372Z DEBUG 34677 --- [           main] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{error=User is not an owner}]
[INFO] Tests run: 16, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.106 s -- in tqs.backend.tqsbackend.controller.OwnerDashboardRestControllerTest
[INFO] Running tqs.backend.tqsbackend.controller.RatingControllerTest
2025-12-11T01:14:19.374Z  INFO 34677 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [tqs.backend.tqsbackend.controller.RatingControllerTest]: RatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-11T01:14:19.376Z  INFO 34677 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration tqs.backend.tqsbackend.TqsbackendApplication for test class tqs.backend.tqsbackend.controller.RatingControllerTest
2025-12-11T01:14:19.377Z  INFO 34677 --- [           main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.7)

2025-12-11T01:14:19.382Z  INFO 34677 --- [           main] t.b.t.controller.RatingControllerTest    : Starting RatingControllerTest using Java 21.0.2 with PID 34677 (started by joaobarreira in /Users/joaobarreira/Desktop/3ano1semestre/TQS/PartyShare/tqsbackend)
2025-12-11T01:14:19.382Z DEBUG 34677 --- [           main] t.b.t.controller.RatingControllerTest    : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-12-11T01:14:19.382Z  INFO 34677 --- [           main] t.b.t.controller.RatingControllerTest    : No active profile set, falling back to 1 default profile: "default"
2025-12-11T01:14:19.382Z DEBUG 34677 --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@12c44578
2025-12-11T01:14:19.422Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 3 mappings in 'requestMappingHandlerMapping'
2025-12-11T01:14:19.428Z DEBUG 34677 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-11T01:14:19.429Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-11T01:14:19.431Z DEBUG 34677 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-11T01:14:19.433Z  INFO 34677 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-11T01:14:19.433Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-11T01:14:19.433Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-12-11T01:14:19.434Z  INFO 34677 --- [           main] t.b.t.controller.RatingControllerTest    : Started RatingControllerTest in 0.057 seconds (process running for 13.432)
2025-12-11T01:14:19.436Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.RatingController#createRating(Long, RatingType, Long, Integer, String, HttpServletRequest, RedirectAttributes)
2025-12-11T01:14:19.437Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:19.439Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.RatingController#createRating(Long, RatingType, Long, Integer, String, HttpServletRequest, RedirectAttributes)
2025-12-11T01:14:19.439Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:19.440Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.RatingController#createRating(Long, RatingType, Long, Integer, String, HttpServletRequest, RedirectAttributes)
2025-12-11T01:14:19.440Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.067 s -- in tqs.backend.tqsbackend.controller.RatingControllerTest
[INFO] Running tqs.backend.tqsbackend.controller.FavoriteControllerTest
2025-12-11T01:14:19.442Z  INFO 34677 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [tqs.backend.tqsbackend.controller.FavoriteControllerTest]: FavoriteControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-11T01:14:19.444Z  INFO 34677 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration tqs.backend.tqsbackend.TqsbackendApplication for test class tqs.backend.tqsbackend.controller.FavoriteControllerTest
2025-12-11T01:14:19.445Z  INFO 34677 --- [           main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.7)

2025-12-11T01:14:19.450Z  INFO 34677 --- [           main] t.b.t.controller.FavoriteControllerTest  : Starting FavoriteControllerTest using Java 21.0.2 with PID 34677 (started by joaobarreira in /Users/joaobarreira/Desktop/3ano1semestre/TQS/PartyShare/tqsbackend)
2025-12-11T01:14:19.450Z DEBUG 34677 --- [           main] t.b.t.controller.FavoriteControllerTest  : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-12-11T01:14:19.450Z  INFO 34677 --- [           main] t.b.t.controller.FavoriteControllerTest  : No active profile set, falling back to 1 default profile: "default"
2025-12-11T01:14:19.450Z DEBUG 34677 --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@58c6a949
2025-12-11T01:14:19.522Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 5 mappings in 'requestMappingHandlerMapping'
2025-12-11T01:14:19.529Z DEBUG 34677 --- [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-12-11T01:14:19.530Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-11T01:14:19.531Z DEBUG 34677 --- [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-11T01:14:19.533Z  INFO 34677 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-12-11T01:14:19.533Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-11T01:14:19.533Z  INFO 34677 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-12-11T01:14:19.535Z  INFO 34677 --- [           main] t.b.t.controller.FavoriteControllerTest  : Started FavoriteControllerTest in 0.09 seconds (process running for 13.533)
2025-12-11T01:14:19.536Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.FavoriteController#removeFavorite(Long, HttpSession, HttpServletRequest, RedirectAttributes)
2025-12-11T01:14:19.537Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:19.539Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.FavoriteController#getFavorites(HttpSession, Model)
2025-12-11T01:14:19.539Z DEBUG 34677 --- [           main] o.s.w.s.v.ContentNegotiatingViewResolver : Selected '*/*' given [*/*]
2025-12-11T01:14:19.559Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.FavoriteController#removeFavorite(Long, HttpSession, HttpServletRequest, RedirectAttributes)
2025-12-11T01:14:19.559Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:19.560Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.FavoriteController#getFavorites(HttpSession, Model)
2025-12-11T01:14:19.560Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:19.561Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.FavoriteController#addFavorite(Long, HttpSession, HttpServletRequest, RedirectAttributes)
2025-12-11T01:14:19.562Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
2025-12-11T01:14:19.562Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.FavoriteController#addFavorite(Long, HttpSession, HttpServletRequest, RedirectAttributes)
2025-12-11T01:14:19.563Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}
[INFO] Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.121 s -- in tqs.backend.tqsbackend.controller.FavoriteControllerTest
[INFO] Running tqs.backend.tqsbackend.controller.FavoriteRestControllerIntegrationTest
2025-12-11T01:14:19.565Z  INFO 34677 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [tqs.backend.tqsbackend.controller.FavoriteRestControllerIntegrationTest]: FavoriteRestControllerIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-11T01:14:19.565Z  INFO 34677 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration tqs.backend.tqsbackend.TqsbackendApplication for test class tqs.backend.tqsbackend.controller.FavoriteRestControllerIntegrationTest
2025-12-11T01:14:19.570Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.FavoriteRestController#addFavorite(Long, Long)
2025-12-11T01:14:19.572Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:19.572Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Nothing to write: null body
2025-12-11T01:14:19.573Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.FavoriteRestController#removeFavorite(Long, Long)
2025-12-11T01:14:19.575Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:19.575Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Nothing to write: null body
2025-12-11T01:14:19.575Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.FavoriteRestController#getFavorites(Long)
2025-12-11T01:14:19.577Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:19.577Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Writing [[]]
2025-12-11T01:14:19.581Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.FavoriteRestController#addFavorite(Long, Long)
2025-12-11T01:14:19.583Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:19.583Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Nothing to write: null body
2025-12-11T01:14:19.584Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.FavoriteRestController#getFavorites(Long)
2025-12-11T01:14:19.586Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-11T01:14:19.586Z DEBUG 34677 --- [           main] m.m.a.RequestResponseBodyMethodProcessor : Writing [[tqs.backend.tqsbackend.entity.Item@30734d60]]
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.023 s -- in tqs.backend.tqsbackend.controller.FavoriteRestControllerIntegrationTest
[INFO] Running tqs.backend.tqsbackend.controller.IT_BookingControllerTest
2025-12-11T01:14:19.589Z  INFO 34677 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [tqs.backend.tqsbackend.controller.IT_BookingControllerTest]: IT_BookingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-12-11T01:14:19.589Z  INFO 34677 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration tqs.backend.tqsbackend.TqsbackendApplication for test class tqs.backend.tqsbackend.controller.IT_BookingControllerTest
2025-12-11T01:14:19.594Z DEBUG 34677 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to tqs.backend.tqsbackend.controller.BookingController#createBooking(BookingCreateRequest, BindingResult, RedirectAttributes, HttpSession)
2025-12-11T01:14:19.599Z DEBUG 34677 --- [           main] o.s.web.servlet.view.RedirectView        : View name [redirect:], model {}

MockHttpServletRequest:
      HTTP Method = POST
      Request URI = /bookings
       Parameters = {itemId=[6], startDate=[2025-12-12], endDate=[2025-12-14], proposedPrice=[8.0]}
          Headers = [Content-Type:"application/x-www-form-urlencoded;charset=UTF-8"]
             Body = null
    Session Attrs = {userId=5}

Handler:
             Type = tqs.backend.tqsbackend.controller.BookingController
           Method = tqs.backend.tqsbackend.controller.BookingController#createBooking(BookingCreateRequest, BindingResult, RedirectAttributes, HttpSession)

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = null

ModelAndView:
        View name = redirect:/payment/1
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 302
    Error message = null
          Headers = [Content-Language:"en", Location:"/payment/1"]
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = /payment/1
          Cookies = []
[ERROR] Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.015 s <<< FAILURE! -- in tqs.backend.tqsbackend.controller.IT_BookingControllerTest
[ERROR] tqs.backend.tqsbackend.controller.IT_BookingControllerTest.createBooking_WithOffer_CreatesBookingWithRequestedStatus -- Time elapsed: 0.012 s <<< FAILURE!
java.lang.AssertionError: Redirected URL expected:</payment/2> but was:</payment/1>
	at org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:61)
	at org.springframework.test.util.AssertionErrors.assertEquals(AssertionErrors.java:128)
	at org.springframework.test.web.servlet.result.MockMvcResultMatchers.lambda$redirectedUrl$2(MockMvcResultMatchers.java:130)
	at org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:214)
	at tqs.backend.tqsbackend.controller.IT_BookingControllerTest.createBooking_WithOffer_CreatesBookingWithRequestedStatus(IT_BookingControllerTest.java:101)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)

[INFO] Running tqs.backend.tqsbackend.service.UserServiceTest
2025-12-11T01:14:19.828Z  INFO 34677 --- [           main] t.b.tqsbackend.service.UserService       : User registered successfully with ID 5
2025-12-11T01:14:20.017Z  INFO 34677 --- [           main] t.b.tqsbackend.service.UserService       : User with email john@ua.pt authenticated successfully.
2025-12-11T01:14:20.090Z  WARN 34677 --- [           main] t.b.tqsbackend.service.UserService       : Authentication failed: Incorrect password for email john@ua.pt.
2025-12-11T01:14:20.091Z  WARN 34677 --- [           main] t.b.tqsbackend.service.UserService       : Authentication failed: User with email sample@ua.pt not found.
2025-12-11T01:14:20.240Z  WARN 34677 --- [           main] t.b.tqsbackend.service.UserService       : Failed to register user: Email existing@ua.pt already exists.
2025-12-11T01:14:20.389Z  INFO 34677 --- [           main] t.b.tqsbackend.service.UserService       : User registered successfully with ID 1
2025-12-11T01:14:20.389Z  WARN 34677 --- [           main] t.b.tqsbackend.service.UserService       : Failed to register user: Invalid Name.
2025-12-11T01:14:20.389Z  WARN 34677 --- [           main] t.b.tqsbackend.service.UserService       : Failed to register user: Invalid Email invalid-email.
2025-12-11T01:14:20.389Z  WARN 34677 --- [           main] t.b.tqsbackend.service.UserService       : Failed to register user: Password too short.
2025-12-11T01:14:20.536Z  WARN 34677 --- [           main] t.b.tqsbackend.service.UserService       : Failed to register user: Role ADMIN is not self-assignable.
2025-12-11T01:14:20.608Z  INFO 34677 --- [           main] t.b.tqsbackend.service.UserService       : User with ID 1 deactivated successfully.
2025-12-11T01:14:20.608Z  WARN 34677 --- [           main] t.b.tqsbackend.service.UserService       : Deactivation failed: User with ID 2 is already inactive.
2025-12-11T01:14:20.608Z  WARN 34677 --- [           main] t.b.tqsbackend.service.UserService       : Deactivation failed: User with ID 99 not found.
2025-12-11T01:14:20.608Z  INFO 34677 --- [           main] t.b.tqsbackend.service.UserService       : User with ID 2 activated successfully.
2025-12-11T01:14:20.608Z  WARN 34677 --- [           main] t.b.tqsbackend.service.UserService       : Activation failed: User with ID 99 not found.
[INFO] Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.002 s -- in tqs.backend.tqsbackend.service.UserServiceTest
[INFO] Running tqs.backend.tqsbackend.service.CategoryServiceTest
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.054 s -- in tqs.backend.tqsbackend.service.CategoryServiceTest
[INFO] Running tqs.backend.tqsbackend.service.RatingServiceTest
2025-12-11T01:14:20.713Z  WARN 34677 --- [           main] t.b.tqsbackend.service.RatingService     : Failed to create rating: Rated owner with ID 2 does not exist.
2025-12-11T01:14:20.715Z  WARN 34677 --- [           main] t.b.tqsbackend.service.RatingService     : Failed to create rating: Rated item with ID 10 does not exist.
2025-12-11T01:14:20.717Z  INFO 34677 --- [           main] t.b.tqsbackend.service.RatingService     : Updated average rating for item 10 to 4.0
2025-12-11T01:14:20.718Z  INFO 34677 --- [           main] t.b.tqsbackend.service.RatingService     : Rating created successfully with ID null
2025-12-11T01:14:20.718Z  WARN 34677 --- [           main] t.b.tqsbackend.service.RatingService     : Failed to create rating: Rated owner with ID 2 does not exist.
2025-12-11T01:14:20.719Z  WARN 34677 --- [           main] t.b.tqsbackend.service.RatingService     : Failed to create rating: Sender with ID 1 is not a renter.
2025-12-11T01:14:20.721Z  WARN 34677 --- [           main] t.b.tqsbackend.service.RatingService     : Failed to create rating: User 1 cannot rate their own product 10.
2025-12-11T01:14:20.721Z  INFO 34677 --- [           main] t.b.tqsbackend.service.RatingService     : Rating created successfully with ID null
2025-12-11T01:14:20.722Z  WARN 34677 --- [           main] t.b.tqsbackend.service.RatingService     : Failed to create rating: Sender with ID 1 is not a renter.
2025-12-11T01:14:20.723Z  WARN 34677 --- [           main] t.b.tqsbackend.service.RatingService     : Failed to create rating: Rate 6 is out of bounds (1-5).
2025-12-11T01:14:20.724Z  WARN 34677 --- [           main] t.b.tqsbackend.service.RatingService     : Failed to delete rating: Rating with ID 1 not found.
2025-12-11T01:14:20.724Z  INFO 34677 --- [           main] t.b.tqsbackend.service.RatingService     : Deleted rating 1
[INFO] Tests run: 14, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.061 s -- in tqs.backend.tqsbackend.service.RatingServiceTest
[INFO] Running tqs.backend.tqsbackend.service.IT_CancelRentalServiceTest
[INFO] Tests run: 6, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.058 s -- in tqs.backend.tqsbackend.service.IT_CancelRentalServiceTest
[INFO] Running tqs.backend.tqsbackend.service.StripePaymentServiceTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.009 s -- in tqs.backend.tqsbackend.service.StripePaymentServiceTest
[INFO] Running tqs.backend.tqsbackend.service.MockPaymentServiceTest
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s -- in tqs.backend.tqsbackend.service.MockPaymentServiceTest
[INFO] Running tqs.backend.tqsbackend.service.FavoriteServiceTest
[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.114 s -- in tqs.backend.tqsbackend.service.FavoriteServiceTest
[INFO] Running tqs.backend.tqsbackend.service.IT_MessageServiceTest
[INFO] Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.048 s -- in tqs.backend.tqsbackend.service.IT_MessageServiceTest
[INFO] Running tqs.backend.tqsbackend.service.BookingServiceTest
[INFO] Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.007 s -- in tqs.backend.tqsbackend.service.BookingServiceTest
[INFO] Running tqs.backend.tqsbackend.service.ReportServiceTest
2025-12-11T01:14:21.012Z  INFO 34677 --- [           main] t.b.tqsbackend.service.ReportService     : Report created successfully with ID 10
2025-12-11T01:14:21.012Z  WARN 34677 --- [           main] t.b.tqsbackend.service.ReportService     : Failed to create report: SenderId 99 is invalid.
2025-12-11T01:14:21.012Z  WARN 34677 --- [           main] t.b.tqsbackend.service.ReportService     : Failed to create report: Title length 0 is invalid (0-128).
2025-12-11T01:14:21.012Z  WARN 34677 --- [           main] t.b.tqsbackend.service.ReportService     : Failed to create report: Description length 0 is invalid (0-4096).
2025-12-11T01:14:21.014Z  INFO 34677 --- [           main] t.b.tqsbackend.service.ReportService     : Updated report 10 state from NEW to IN_PROGRESS
2025-12-11T01:14:21.014Z  INFO 34677 --- [           main] t.b.tqsbackend.service.ReportService     : Updated report 10 state from IN_PROGRESS to CLOSED
2025-12-11T01:14:21.014Z  INFO 34677 --- [           main] t.b.tqsbackend.service.ReportService     : Report 10 is already CLOSED. No further state change applied.
2025-12-11T01:14:21.014Z  WARN 34677 --- [           main] t.b.tqsbackend.service.ReportService     : Failed to update report state: Report with ID 99 not found.
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.047 s -- in tqs.backend.tqsbackend.service.ReportServiceTest
[INFO] Running tqs.backend.tqsbackend.service.MockAddingItemServiceTest
Mock data initialized: 3 owners and 5 items created!
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.217 s -- in tqs.backend.tqsbackend.service.MockAddingItemServiceTest
[INFO] Running tqs.backend.tqsbackend.service.ItemServiceTest
[INFO] Tests run: 19, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.009 s -- in tqs.backend.tqsbackend.service.ItemServiceTest
[INFO] Running tqs.backend.tqsbackend.service.BookingServiceUnavailableDatesTest
[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 s -- in tqs.backend.tqsbackend.service.BookingServiceUnavailableDatesTest
[INFO] 
[INFO] Results:
[INFO] 
[ERROR] Failures: 
[ERROR]   IT_BookingControllerTest.createBooking_WithOffer_CreatesBookingWithRequestedStatus:101 Redirected URL expected:</payment/2> but was:</payment/1>
[ERROR]   IT_ItemControllerTest.updateItem_WithValidData_UpdatesItem:103 Range for response status value 405 expected:<REDIRECTION> but was:<CLIENT_ERROR>
[ERROR] Errors: 
[ERROR]   IT_ItemControllerTest.createItem_WithValidData_RedirectsToMyItems:55  DataIntegrityViolation could not execute statement [Unique index or primary key violation: "PUBLIC.CONSTRAINT_INDEX_6 ON PUBLIC.CATEGORIES(NAME NULLS FIRST) VALUES ( /* 1 */ 'Electronics' )"; SQL statement:
insert into categories (name,id) values (?,default) [23505-232]] [insert into categories (name,id) values (?,default)]; SQL [insert into categories (name,id) values (?,default)]; constraint [PUBLIC.CONSTRAINT_INDEX_6]
[INFO] 
[ERROR] Tests run: 278, Failures: 2, Errors: 1, Skipped: 0
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  16.278 s
[INFO] Finished at: 2025-12-11T01:14:21Z
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.2.5:test (default-test) on project tqsbackend: There are test failures.
[ERROR] 
[ERROR] Please refer to /Users/joaobarreira/Desktop/3ano1semestre/TQS/PartyShare/tqsbackend/target/surefire-reports for the individual test results.
[ERROR] Please refer to dump files (if any exist) [date].dump, [date]-jvmRun[N].dump and [date].dumpstream.
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
